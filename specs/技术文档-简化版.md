
# é¡¹ç›®é‡‡è´­ä¸æˆæœ¬ç®¡ç†ç³»ç»Ÿ - æŠ€æœ¯è®¾è®¡æ–‡æ¡£ï¼ˆç®€åŒ–ç‰ˆï¼‰

## æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£æ˜¯åŸºäºã€ŠæŠ€æœ¯æ–‡æ¡£å®¡æŸ¥æŠ¥å‘Šã€‹çš„å»ºè®®ï¼Œé’ˆå¯¹åˆå­¦è€…å’Œå°è§„æ¨¡ç³»ç»Ÿä¼˜åŒ–åçš„æŠ€æœ¯æ–¹æ¡ˆã€‚é‡‡ç”¨**æ¸è¿›å¼å¼€å‘ç­–ç•¥**ï¼Œä»æœ€ç®€å•çš„æ–¹æ¡ˆå¼€å§‹ï¼Œæ ¹æ®å®é™…éœ€è¦é€æ­¥å‡çº§ã€‚

---

## 1. æ–‡æ¡£æ¦‚è¿°

### 1.1 æ–‡æ¡£ç›®çš„
ä¸ºåˆå­¦è€…æä¾›æ¸…æ™°ã€å¯æ‰§è¡Œçš„æŠ€æœ¯å®æ–½æ–¹æ¡ˆï¼Œç¡®ä¿èƒ½åœ¨**2å‘¨å†…å®ç°MVPæœ€å°å¯è¡Œäº§å“**ã€‚

### 1.2 é€‚ç”¨èŒƒå›´
- åˆå­¦è€…ï¼ˆæœ‰Python/çˆ¬è™«åŸºç¡€ï¼‰
- å°è§„æ¨¡ç³»ç»Ÿï¼ˆç”¨æˆ·<20äººï¼Œæ•°æ®<10ä¸‡æ¡ï¼‰
- å¿«é€Ÿä¸Šçº¿éœ€æ±‚ï¼ˆ2-4å‘¨å¼€å‘å‘¨æœŸï¼‰

### 1.3 è®¾è®¡åŸåˆ™
- **KISSï¼ˆç®€å•è‡³ä¸Šï¼‰**ï¼šé€‰æ‹©æœ€ç®€å•çš„æŠ€æœ¯æ–¹æ¡ˆ
- **YAGNIï¼ˆä½ ä¸éœ€è¦å®ƒï¼‰**ï¼šåªå®ç°å½“å‰éœ€è¦çš„åŠŸèƒ½
- **æ¸è¿›å¼å¼€å‘**ï¼šä»ç®€å•åˆ°å¤æ‚ï¼Œé€æ­¥ä¼˜åŒ–

---

## 2. æŠ€æœ¯æ–¹æ¡ˆè·¯çº¿å›¾

### 2.1 ä¸‰é˜¶æ®µæŠ€æœ¯æ–¹æ¡ˆ

```
é˜¶æ®µä¸€ï¼šMVPï¼ˆ2å‘¨ï¼‰         é˜¶æ®µäºŒï¼šæ ‡å‡†ç‰ˆï¼ˆ+3å‘¨ï¼‰      é˜¶æ®µä¸‰ï¼šä¼ä¸šç‰ˆï¼ˆå¯é€‰ï¼‰
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Django Admin    â”‚  â†’    â”‚ Vue 3 å‰ç«¯      â”‚  â†’    â”‚ PostgreSQL     â”‚
â”‚ SQLite          â”‚       â”‚ è‡ªå®šä¹‰ç•Œé¢       â”‚       â”‚ Nginx          â”‚
â”‚ å¼€å‘æœåŠ¡å™¨       â”‚       â”‚ Waitress        â”‚       â”‚ é«˜å¯ç”¨éƒ¨ç½²      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  å­¦ä¹ æˆæœ¬: â­â­             å­¦ä¹ æˆæœ¬: â­â­â­â­           å­¦ä¹ æˆæœ¬: â­â­â­â­â­
  å¼€å‘æ—¶é—´: 2å‘¨             å¼€å‘æ—¶é—´: 3å‘¨             å¼€å‘æ—¶é—´: 2å‘¨
```

### 2.2 æ–¹æ¡ˆå¯¹æ¯”

| å¯¹æ¯”é¡¹ | é˜¶æ®µä¸€ï¼ˆæ¨èï¼‰ | é˜¶æ®µäºŒ | é˜¶æ®µä¸‰ |
|-------|-------------|--------|--------|
| æ•°æ®åº“ | SQLite | SQLite | PostgreSQL |
| å‰ç«¯ | Django Admin | Vue 3 + Element Plus | Vue 3 + TypeScript |
| éƒ¨ç½² | å¼€å‘æœåŠ¡å™¨ | Waitress | Nginx + Waitress |
| å­¦ä¹ éš¾åº¦ | â­â­ | â­â­â­â­ | â­â­â­â­â­ |
| å¼€å‘æ—¶é—´ | 2å‘¨ | 5å‘¨ | 7å‘¨ |
| ç»´æŠ¤éš¾åº¦ | ä½ | ä¸­ | é«˜ |
| é€‚ç”¨æ•°æ®é‡ | <10ä¸‡ | <50ä¸‡ | æ— é™åˆ¶ |
| é€‚ç”¨ç”¨æˆ·æ•° | <20äºº | <100äºº | æ— é™åˆ¶ |

---

## 3. é˜¶æ®µä¸€ï¼šMVPå®æ–½æ–¹æ¡ˆï¼ˆæ¨èï¼‰

### 3.1 æŠ€æœ¯æ ˆ

```
åç«¯ï¼šPython 3.10+ + Django 4.2+
æ•°æ®åº“ï¼šSQLiteï¼ˆDjangoå†…ç½®æ”¯æŒï¼‰
å‰ç«¯ï¼šDjango Adminï¼ˆæ— éœ€ç¼–å†™å‰ç«¯ä»£ç ï¼‰
éƒ¨ç½²ï¼šDjangoå¼€å‘æœåŠ¡å™¨
ä¾èµ–åº“ï¼špandas, openpyxlï¼ˆå¤„ç†Excelï¼‰
```

### 3.2 ç¯å¢ƒæ­å»ºï¼ˆ30åˆ†é’Ÿï¼‰

#### æ­¥éª¤1ï¼šå®‰è£…Python
```bash
# ä¸‹è½½Python 3.10+
# https://www.python.org/downloads/

# éªŒè¯å®‰è£…
python --version
```

#### æ­¥éª¤2ï¼šåˆ›å»ºé¡¹ç›®
```bash
# åˆ›å»ºé¡¹ç›®ç›®å½•
mkdir procurement_system
cd procurement_system

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/Mac

# å®‰è£…Djangoå’Œä¾èµ–
pip install django pandas openpyxl
```

#### æ­¥éª¤3ï¼šåˆå§‹åŒ–Djangoé¡¹ç›®
```bash
# åˆ›å»ºDjangoé¡¹ç›®
django-admin startproject config .

# åˆ›å»ºåº”ç”¨
python manage.py startapp procurement
python manage.py startapp contract
python manage.py startapp payment
python manage.py startapp settlement
python manage.py startapp supplier_eval
```

### 3.3 æ•°æ®åº“è®¾è®¡

#### é…ç½®SQLiteï¼ˆé»˜è®¤é…ç½®ï¼Œæ— éœ€ä¿®æ”¹ï¼‰
```python
# config/settings.py
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
    }
}

# é…ç½®ä¸­æ–‡
LANGUAGE_CODE = 'zh-hans'
TIME_ZONE = 'Asia/Shanghai'
USE_TZ = True
```

#### æ ¸å¿ƒæ¨¡å‹å®šä¹‰

```python
# procurement/models.py
from django.db import models
from django.core.exceptions import ValidationError

class Procurement(models.Model):
    """é‡‡è´­ç®¡ç†"""
    procurement_code = models.CharField('æ‹›é‡‡ç¼–å·', max_length=50, primary_key=True)
    project_name = models.CharField('é‡‡è´­é¡¹ç›®åç§°', max_length=200)
    procurement_unit = models.CharField('é‡‡è´­å•ä½', max_length=200, blank=True)
    winning_unit = models.CharField('ä¸­æ ‡å•ä½', max_length=200, blank=True)
    winning_contact = models.CharField('ä¸­æ ‡å•ä½è”ç³»äºº', max_length=200, blank=True)
    procurement_method = models.CharField('é‡‡è´­æ–¹å¼', max_length=50, blank=True)
    
    CATEGORY_CHOICES = [
        ('å·¥ç¨‹', 'å·¥ç¨‹'),
        ('è´§ç‰©', 'è´§ç‰©'),
        ('æœåŠ¡', 'æœåŠ¡'),
    ]
    procurement_category = models.CharField('é‡‡è´­ç±»åˆ«', max_length=20, 
                                           choices=CATEGORY_CHOICES, blank=True)
    
    budget_amount = models.DecimalField('é‡‡è´­é¢„ç®—é‡‘é¢', max_digits=15, 
                                       decimal_places=2, null=True, blank=True)
    control_price = models.DecimalField('é‡‡è´­æ§åˆ¶ä»·', max_digits=15, 
                                       decimal_places=2, null=True, blank=True)
    winning_amount = models.DecimalField('ä¸­æ ‡é‡‘é¢', max_digits=15, 
                                        decimal_places=2, null=True, blank=True)
    
    planned_end_date = models.DateField('è®¡åˆ’ç»“æŸé‡‡è´­æ—¶é—´', null=True, blank=True)
    notice_issue_date = models.DateField('ä¸­æ ‡é€šçŸ¥ä¹¦å‘æ”¾æ—¥æœŸ', null=True, blank=True)
    procurement_officer = models.CharField('é‡‡è´­ç»åŠäºº', max_length=50, blank=True)
    demand_department = models.CharField('éœ€æ±‚éƒ¨é—¨', max_length=100, blank=True)
    
    # å®¡è®¡å­—æ®µ
    created_at = models.DateTimeField('åˆ›å»ºæ—¶é—´', auto_now_add=True)
    updated_at = models.DateTimeField('æ›´æ–°æ—¶é—´', auto_now=True)
    created_by = models.CharField('åˆ›å»ºäºº', max_length=50, blank=True)
    updated_by = models.CharField('æ›´æ–°äºº', max_length=50, blank=True)
    
    class Meta:
        verbose_name = 'é‡‡è´­ä¿¡æ¯'
        verbose_name_plural = 'é‡‡è´­ä¿¡æ¯'
        ordering = ['-created_at']
    
    def __str__(self):
        return f"{self.procurement_code} - {self.project_name}"


# contract/models.py
class Contract(models.Model):
    """åˆåŒç®¡ç†"""
    contract_code = models.CharField('åˆåŒç¼–å·', max_length=50, primary_key=True)
    contract_name = models.CharField('åˆåŒåç§°', max_length=200)
    contract_officer = models.CharField('åˆåŒç­¾è®¢ç»åŠäºº', max_length=50, blank=True)
    
    CONTRACT_TYPE_CHOICES = [
        ('ä¸»åˆåŒ', 'ä¸»åˆåŒ'),
        ('è¡¥å……åè®®', 'è¡¥å……åè®®'),
        ('è§£é™¤åè®®', 'è§£é™¤åè®®'),
    ]
    contract_type = models.CharField('åˆåŒç±»å‹', max_length=20, 
                                    choices=CONTRACT_TYPE_CHOICES, default='ä¸»åˆåŒ')
    
    # å…³è”å…³ç³»
    parent_contract = models.ForeignKey('self', on_delete=models.PROTECT, 
                                       verbose_name='å…³è”ä¸»åˆåŒ', 
                                       null=True, blank=True,
                                       related_name='supplements')
    procurement = models.ForeignKey('procurement.Procurement', 
                                   on_delete=models.PROTECT,
                                   verbose_name='å…³è”é‡‡è´­', 
                                   null=True, blank=True,
                                   related_name='contracts')
    
    party_a = models.CharField('ç”²æ–¹', max_length=200, blank=True)
    party_b = models.CharField('ä¹™æ–¹', max_length=200, blank=True)
    contract_amount = models.DecimalField('å«ç¨ç­¾çº¦åˆåŒä»·', max_digits=15, 
                                         decimal_places=2, null=True, blank=True)
    signing_date = models.DateField('åˆåŒç­¾è®¢æ—¥æœŸ', null=True, blank=True)
    duration = models.CharField('åˆåŒå·¥æœŸ/æœåŠ¡æœŸé™', max_length=100, blank=True)
    payment_method = models.TextField('æ”¯ä»˜æ–¹å¼', blank=True)
    
    # å®¡è®¡å­—æ®µ
    created_at = models.DateTimeField('åˆ›å»ºæ—¶é—´', auto_now_add=True)
    updated_at = models.DateTimeField('æ›´æ–°æ—¶é—´', auto_now=True)
    created_by = models.CharField('åˆ›å»ºäºº', max_length=50, blank=True)
    updated_by = models.CharField('æ›´æ–°äºº', max_length=50, blank=True)
    
    class Meta:
        verbose_name = 'åˆåŒä¿¡æ¯'
        verbose_name_plural = 'åˆåŒä¿¡æ¯'
        ordering = ['-created_at']
    
    def __str__(self):
        return f"{self.contract_code} - {self.contract_name}"
    
    def clean(self):
        """æ•°æ®éªŒè¯"""
        # éªŒè¯ï¼šè¡¥å……åè®®å¿…é¡»å…³è”ä¸»åˆåŒ
        if self.contract_type == 'è¡¥å……åè®®' and not self.parent_contract:
            raise ValidationError('è¡¥å……åè®®å¿…é¡»å…³è”ä¸»åˆåŒ')
        
        # éªŒè¯ï¼šä¸»åˆåŒä¸èƒ½å…³è”å…¶ä»–åˆåŒ
        if self.contract_type == 'ä¸»åˆåŒ' and self.parent_contract:
            raise ValidationError('ä¸»åˆåŒä¸èƒ½å…³è”å…¶ä»–åˆåŒ')
    
    def save(self, *args, **kwargs):
        self.full_clean()
        super().save(*args, **kwargs)


# payment/models.py
class Payment(models.Model):
    """ä»˜æ¬¾ç®¡ç†"""
    payment_code = models.CharField('ä»˜æ¬¾ç¼–å·', max_length=50, primary_key=True)
    contract = models.ForeignKey('contract.Contract', on_delete=models.PROTECT,
                                verbose_name='å…³è”åˆåŒ', related_name='payments')
    payment_amount = models.DecimalField('å®ä»˜é‡‘é¢', max_digits=15, decimal_places=2)
    payment_date = models.DateField('ä»˜æ¬¾æ—¥æœŸ')
    
    # å®¡è®¡å­—æ®µ
    created_at = models.DateTimeField('åˆ›å»ºæ—¶é—´', auto_now_add=True)
    updated_at = models.DateTimeField('æ›´æ–°æ—¶é—´', auto_now=True)
    created_by = models.CharField('åˆ›å»ºäºº', max_length=50, blank=True)
    updated_by = models.CharField('æ›´æ–°äºº', max_length=50, blank=True)
    
    class Meta:
        verbose_name = 'ä»˜æ¬¾ä¿¡æ¯'
        verbose_name_plural = 'ä»˜æ¬¾ä¿¡æ¯'
        ordering = ['-payment_date']
    
    def __str__(self):
        return f"{self.payment_code} - {self.payment_amount}å…ƒ"
    
    def clean(self):
        """éªŒè¯ï¼šç´¯è®¡ä»˜æ¬¾ä¸è¶…è¿‡åˆåŒé‡‘é¢çš„120%"""
        if not self.contract.contract_amount:
            return
        
        from django.db.models import Sum
        total_paid = Payment.objects.filter(contract=self.contract).aggregate(
            total=Sum('payment_amount')
        )['total'] or 0
        
        if self.pk:  # æ›´æ–°æ—¶æ’é™¤è‡ªå·±
            old_amount = Payment.objects.get(pk=self.pk).payment_amount
            total_paid -= old_amount
        
        total_paid += self.payment_amount
        
        if total_paid > self.contract.contract_amount * 1.2:
            raise ValidationError(
                f'ç´¯è®¡ä»˜æ¬¾ {total_paid} å…ƒè¶…è¿‡åˆåŒé‡‘é¢ '
                f'{self.contract.contract_amount} å…ƒçš„120%'
            )


# settlement/models.py
class Settlement(models.Model):
    """ç»“ç®—ç®¡ç†"""
    settlement_code = models.CharField('ç»“ç®—ç¼–å·', max_length=50, primary_key=True)
    contract = models.OneToOneField('contract.Contract', on_delete=models.PROTECT,
                                   verbose_name='å…³è”åˆåŒ', related_name='settlement')
    final_amount = models.DecimalField('æœ€ç»ˆç»“ç®—é‡‘é¢', max_digits=15, decimal_places=2)
    completion_date = models.DateField('å®Œæˆæ—¥æœŸ', null=True, blank=True)
    
    # å®¡è®¡å­—æ®µ
    created_at = models.DateTimeField('åˆ›å»ºæ—¶é—´', auto_now_add=True)
    updated_at = models.DateTimeField('æ›´æ–°æ—¶é—´', auto_now=True)
    created_by = models.CharField('åˆ›å»ºäºº', max_length=50, blank=True)
    updated_by = models.CharField('æ›´æ–°äºº', max_length=50, blank=True)
    
    class Meta:
        verbose_name = 'ç»“ç®—ä¿¡æ¯'
        verbose_name_plural = 'ç»“ç®—ä¿¡æ¯'
    
    def __str__(self):
        return f"{self.settlement_code} - {self.final_amount}å…ƒ"


# supplier_eval/models.py
class SupplierEvaluation(models.Model):
    """ä¾›åº”å•†å±¥çº¦è¯„ä»·"""
    evaluation_code = models.CharField('è¯„ä»·ç¼–å·', max_length=50, primary_key=True)
    contract = models.ForeignKey('contract.Contract', on_delete=models.PROTECT,
                                verbose_name='å…³è”åˆåŒ', related_name='evaluations')
    supplier_name = models.CharField('ä¾›åº”å•†åç§°', max_length=200)
    evaluation_period = models.CharField('è¯„ä»·æ—¥æœŸåŒºé—´', max_length=100, blank=True)
    evaluator = models.CharField('è¯„ä»·äººå‘˜', max_length=50, blank=True)
    score = models.DecimalField('è¯„åˆ†', max_digits=5, decimal_places=2, 
                               null=True, blank=True)
    
    EVAL_TYPE_CHOICES = [
        ('æœ«æ¬¡è¯„ä»·', 'æœ«æ¬¡è¯„ä»·'),
        ('å±¥çº¦è¿‡ç¨‹è¯„ä»·', 'å±¥çº¦è¿‡ç¨‹è¯„ä»·'),
    ]
    evaluation_type = models.CharField('è¯„ä»·ç±»å‹', max_length=20, 
                                      choices=EVAL_TYPE_CHOICES, blank=True)
    
    # å®¡è®¡å­—æ®µ
    created_at = models.DateTimeField('åˆ›å»ºæ—¶é—´', auto_now_add=True)
    updated_at = models.DateTimeField('æ›´æ–°æ—¶é—´', auto_now=True)
    created_by = models.CharField('åˆ›å»ºäºº', max_length=50, blank=True)
    updated_by = models.CharField('æ›´æ–°äºº', max_length=50, blank=True)
    
    class Meta:
        verbose_name = 'ä¾›åº”å•†è¯„ä»·'
        verbose_name_plural = 'ä¾›åº”å•†è¯„ä»·'
        ordering = ['-created_at']
    
    def __str__(self):
        return f"{self.evaluation_code} - {self.supplier_name}"
```

### 3.4 é…ç½®Django Admin

```python
# procurement/admin.py
from django.contrib import admin
from .models import Procurement

@admin.register(Procurement)
class ProcurementAdmin(admin.ModelAdmin):
    list_display = ['procurement_code', 'project_name', 'winning_unit', 
                   'winning_amount', 'procurement_officer', 'created_at']
    search_fields = ['procurement_code', 'project_name', 'winning_unit']
    list_filter = ['procurement_category', 'created_at']
    date_hierarchy = 'created_at'
    
    fieldsets = (
        ('åŸºæœ¬ä¿¡æ¯', {
            'fields': ('procurement_code', 'project_name', 'procurement_unit')
        }),
        ('ä¸­æ ‡ä¿¡æ¯', {
            'fields': ('winning_unit', 'winning_contact', 'winning_amount')
        }),
        ('é‡‡è´­è¯¦æƒ…', {
            'fields': ('procurement_method', 'procurement_category', 
                      'budget_amount', 'control_price')
        }),
        ('æ—¶é—´ä¿¡æ¯', {
            'fields': ('planned_end_date', 'notice_issue_date')
        }),
        ('è´Ÿè´£äººä¿¡æ¯', {
            'fields': ('procurement_officer', 'demand_department')
        }),
    )


# contract/admin.py
from django.contrib import admin
from .models import Contract

@admin.register(Contract)
class ContractAdmin(admin.ModelAdmin):
    list_display = ['contract_code', 'contract_name', 'contract_type',
                   'party_b', 'contract_amount', 'signing_date']
    search_fields = ['contract_code', 'contract_name', 'party_b']
    list_filter = ['contract_type', 'signing_date']
    autocomplete_fields = ['procurement', 'parent_contract']
    date_hierarchy = 'signing_date'
    
    fieldsets = (
        ('åŸºæœ¬ä¿¡æ¯', {
            'fields': ('contract_code', 'contract_name', 'contract_type')
        }),
        ('å…³è”ä¿¡æ¯', {
            'fields': ('parent_contract', 'procurement')
        }),
        ('åˆåŒæ–¹ä¿¡æ¯', {
            'fields': ('party_a', 'party_b')
        }),
        ('é‡‘é¢ä¸æ—¶é—´', {
            'fields': ('contract_amount', 'signing_date', 'duration')
        }),
        ('å…¶ä»–ä¿¡æ¯', {
            'fields': ('contract_officer', 'payment_method'),
            'classes': ('collapse',)
        }),
    )


# payment/admin.py
from django.contrib import admin
from .models import Payment

@admin.register(Payment)
class PaymentAdmin(admin.ModelAdmin):
    list_display = ['payment_code', 'contract', 
'payment_amount', 'payment_date']
    search_fields = ['payment_code', 'contract__contract_code']
    list_filter = ['payment_date']
    autocomplete_fields = ['contract']
    date_hierarchy = 'payment_date'


# settlement/admin.py
from django.contrib import admin
from .models import Settlement

@admin.register(Settlement)
class SettlementAdmin(admin.ModelAdmin):
    list_display = ['settlement_code', 'contract', 'final_amount', 'completion_date']
    search_fields = ['settlement_code', 'contract__contract_code']
    autocomplete_fields = ['contract']


# supplier_eval/admin.py
from django.contrib import admin
from .models import SupplierEvaluation

@admin.register(SupplierEvaluation)
class SupplierEvaluationAdmin(admin.ModelAdmin):
    list_display = ['evaluation_code', 'supplier_name', 'score', 
                   'evaluation_type', 'created_at']
    search_fields = ['evaluation_code', 'supplier_name', 'contract__contract_code']
    list_filter = ['evaluation_type', 'created_at']
    autocomplete_fields = ['contract']
```

### 3.5 Excelå¯¼å…¥åŠŸèƒ½

```python
# procurement/management/commands/import_excel.py
from django.core.management.base import BaseCommand
from procurement.models import Procurement
import pandas as pd

class Command(BaseCommand):
    help = 'å¯¼å…¥é‡‡è´­æ•°æ®'
    
    def add_arguments(self, parser):
        parser.add_argument('file', type=str, help='Excelæ–‡ä»¶è·¯å¾„')
    
    def handle(self, *args, **options):
        try:
            df = pd.read_excel(options['file'])
            success_count = 0
            error_count = 0
            
            for idx, row in df.iterrows():
                try:
                    Procurement.objects.update_or_create(
                        procurement_code=row['æ‹›é‡‡ç¼–å·'],
                        defaults={
                            'project_name': row.get('é‡‡è´­é¡¹ç›®åç§°', ''),
                            'winning_unit': row.get('ä¸­æ ‡å•ä½', ''),
                            'winning_amount': row.get('ä¸­æ ‡é‡‘é¢'),
                            'procurement_officer': row.get('é‡‡è´­ç»åŠäºº', ''),
                        }
                    )
                    success_count += 1
                except Exception as e:
                    error_count += 1
                    self.stdout.write(
                        self.style.ERROR(f'ç¬¬{idx+2}è¡Œå¯¼å…¥å¤±è´¥: {str(e)}')
                    )
            
            self.stdout.write(
                self.style.SUCCESS(
                    f'å¯¼å…¥å®Œæˆï¼æˆåŠŸ: {success_count}, å¤±è´¥: {error_count}'
                )
            )
        except Exception as e:
            self.stdout.write(self.style.ERROR(f'æ–‡ä»¶è¯»å–å¤±è´¥: {str(e)}'))


# ä½¿ç”¨æ–¹æ³•ï¼š
# python manage.py import_excel data.xlsx
```

#### å®½è¡¨è½¬é•¿è¡¨åŠŸèƒ½

```python
# payment/management/commands/convert_wide_to_long.py
from django.core.management.base import BaseCommand
from payment.models import Payment
from contract.models import Contract
import pandas as pd
import re
from datetime import datetime

class Command(BaseCommand):
    help = 'å°†ä»˜æ¬¾å®½è¡¨è½¬æ¢ä¸ºé•¿è¡¨å¹¶å¯¼å…¥'
    
    def add_arguments(self, parser):
        parser.add_argument('file', type=str, help='ä»˜æ¬¾å®½è¡¨Excelæ–‡ä»¶')
    
    def parse_month_to_date(self, month_str):
        """å°†"2022å¹´1æœˆ"è½¬æ¢ä¸º"2022-01-01"""
        match = re.search(r'(\d{4})\D*(\d{1,2})', str(month_str))
        if not match:
            raise ValueError(f"æ— æ³•è§£ææ—¥æœŸ: {month_str}")
        
        year = int(match.group(1))
        month = int(match.group(2))
        return datetime(year, month, 1).date()
    
    def handle(self, *args, **options):
        try:
            # è¯»å–Excel
            df = pd.read_excel(options['file'])
            
            # ç¬¬ä¸€åˆ—æ˜¯åˆåŒç¼–å·
            contract_col = df.columns[0]
            
            # è¯†åˆ«æ—¥æœŸåˆ—
            date_cols = [col for col in df.columns[1:] 
                        if 'å¹´' in str(col) or 'æœˆ' in str(col)]
            
            self.stdout.write(f"å‘ç° {len(date_cols)} ä¸ªæ—¥æœŸåˆ—")
            
            # å®½è¡¨è½¬é•¿è¡¨
            df_long = pd.melt(
                df,
                id_vars=[contract_col],
                value_vars=date_cols,
                var_name='æœˆä»½',
                value_name='å®ä»˜é‡‘é¢'
            )
            
            # æ¸…ç†ç©ºå€¼
            df_long = df_long[df_long['å®ä»˜é‡‘é¢'].notna()]
            df_long = df_long[df_long['å®ä»˜é‡‘é¢'] > 0]
            
            self.stdout.write(f"è½¬æ¢åæœ‰æ•ˆè®°å½•: {len(df_long)} æ¡")
            
            # å¯¼å…¥æ•°æ®
            success_count = 0
            error_count = 0
            
            # æŒ‰åˆåŒåˆ†ç»„
            for contract_code, group in df_long.groupby(contract_col):
                try:
                    # æ£€æŸ¥åˆåŒæ˜¯å¦å­˜åœ¨
                    contract = Contract.objects.get(contract_code=contract_code)
                    
                    # ä¸ºæ¯æ¡ä»˜æ¬¾è®°å½•ç”Ÿæˆç¼–å·
                    for idx, row in enumerate(group.itertuples(), start=1):
                        payment_code = f"{contract_code}-FK-{idx:03d}"
                        payment_date = self.parse_month_to_date(row.æœˆä»½)
                        payment_amount = float(row.å®ä»˜é‡‘é¢)
                        
                        Payment.objects.update_or_create(
                            payment_code=payment_code,
                            defaults={
                                'contract': contract,
                                'payment_date': payment_date,
                                'payment_amount': payment_amount,
                            }
                        )
                        success_count += 1
                        
                except Contract.DoesNotExist:
                    error_count += len(group)
                    self.stdout.write(
                        self.style.ERROR(f'åˆåŒ {contract_code} ä¸å­˜åœ¨')
                    )
                except Exception as e:
                    error_count += 1
                    self.stdout.write(
                        self.style.ERROR(f'å¯¼å…¥å¤±è´¥: {str(e)}')
                    )
            
            self.stdout.write(
                self.style.SUCCESS(
                    f'å¯¼å…¥å®Œæˆï¼æˆåŠŸ: {success_count}, å¤±è´¥: {error_count}'
                )
            )
            
        except Exception as e:
            self.stdout.write(self.style.ERROR(f'å¤„ç†å¤±è´¥: {str(e)}'))


# ä½¿ç”¨æ–¹æ³•ï¼š
# python manage.py convert_wide_to_long payment_wide.xlsx
```

### 3.6 æ³¨å†Œåº”ç”¨å’Œé…ç½®

```python
# config/settings.py
INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    
    # ä¸šåŠ¡åº”ç”¨
    'procurement',
    'contract',
    'payment',
    'settlement',
    'supplier_eval',
]

# config/urls.py
from django.contrib import admin
from django.urls import path

urlpatterns = [
    path('admin/', admin.site.urls),
]

# è‡ªå®šä¹‰Adminæ ‡é¢˜
admin.site.site_header = 'é¡¹ç›®é‡‡è´­ä¸æˆæœ¬ç®¡ç†ç³»ç»Ÿ'
admin.site.site_title = 'é‡‡è´­ç®¡ç†'
admin.site.index_title = 'æ¬¢è¿ä½¿ç”¨é¡¹ç›®é‡‡è´­ä¸æˆæœ¬ç®¡ç†ç³»ç»Ÿ'
```

### 3.7 æ‰§è¡Œè¿ç§»å’Œå¯åŠ¨

```bash
# åˆ›å»ºè¿ç§»æ–‡ä»¶
python manage.py makemigrations

# æ‰§è¡Œè¿ç§»
python manage.py migrate

# åˆ›å»ºè¶…çº§ç”¨æˆ·
python manage.py createsuperuser
# è¾“å…¥ç”¨æˆ·åã€é‚®ç®±ã€å¯†ç 

# å¯åŠ¨å¼€å‘æœåŠ¡å™¨
python manage.py runserver 0.0.0.0:8000

# è®¿é—®ç³»ç»Ÿ
# http://æœåŠ¡å™¨IP:8000/admin
```

### 3.8 Windowsé˜²ç«å¢™é…ç½®

```
æ§åˆ¶é¢æ¿ â†’ Windows Defenderé˜²ç«å¢™ â†’ é«˜çº§è®¾ç½®
â†’ å…¥ç«™è§„åˆ™ â†’ æ–°å»ºè§„åˆ™
â†’ ç«¯å£ â†’ TCP â†’ ç‰¹å®šæœ¬åœ°ç«¯å£: 8000
â†’ å…è®¸è¿æ¥ â†’ æ‰€æœ‰é…ç½®æ–‡ä»¶
â†’ åç§°: Djangoå¼€å‘æœåŠ¡å™¨
```

### 3.9 æ•°æ®å¤‡ä»½è„šæœ¬

```python
# backup_db.py
import shutil
import datetime
import os

def backup_database():
    """å¤‡ä»½SQLiteæ•°æ®åº“"""
    source = 'db.sqlite3'
    backup_dir = 'backups'
    
    # åˆ›å»ºå¤‡ä»½ç›®å½•
    if not os.path.exists(backup_dir):
        os.makedirs(backup_dir)
    
    # ç”Ÿæˆå¤‡ä»½æ–‡ä»¶å
    timestamp = datetime.datetime.now().strftime('%Y%m%d_%H%M%S')
    backup_file = os.path.join(backup_dir, f'db_backup_{timestamp}.sqlite3')
    
    # å¤åˆ¶æ•°æ®åº“æ–‡ä»¶
    shutil.copy2(source, backup_file)
    
    print(f"âœ“ æ•°æ®åº“å·²å¤‡ä»½åˆ°: {backup_file}")
    
    # åˆ é™¤7å¤©å‰çš„å¤‡ä»½
    for file in os.listdir(backup_dir):
        file_path = os.path.join(backup_dir, file)
        if os.path.isfile(file_path):
            file_time = datetime.datetime.fromtimestamp(
                os.path.getctime(file_path)
            )
            if (datetime.datetime.now() - file_time).days > 7:
                os.remove(file_path)
                print(f"âœ“ å·²åˆ é™¤æ—§å¤‡ä»½: {file}")

if __name__ == '__main__':
    backup_database()
```

#### é…ç½®Windowsä»»åŠ¡è®¡åˆ’ç¨‹åº

```
1. æ‰“å¼€"ä»»åŠ¡è®¡åˆ’ç¨‹åº"
2. åˆ›å»ºåŸºæœ¬ä»»åŠ¡
3. åç§°: æ¯æ—¥æ•°æ®åº“å¤‡ä»½
4. è§¦å‘å™¨: æ¯å¤©å‡Œæ™¨2:00
5. æ“ä½œ: å¯åŠ¨ç¨‹åº
   ç¨‹åº: C:\path\to\venv\Scripts\python.exe
   å‚æ•°: C:\path\to\backup_db.py
   èµ·å§‹äº: C:\path\to\procurement_system
6. å®Œæˆ
```

---

## 4. é˜¶æ®µäºŒï¼šæ·»åŠ Vueå‰ç«¯ï¼ˆå¯é€‰ï¼‰

### 4.1 ä½•æ—¶éœ€è¦é˜¶æ®µäºŒ

```
âœ“ Django Adminç•Œé¢å·²ç»æ»¡è¶³åŸºæœ¬éœ€æ±‚
âœ“ ä½¿ç”¨2-4å‘¨åå‘ç°ï¼š
  - å¸Œæœ›ç•Œé¢æ›´ç¾è§‚
  - éœ€è¦æ›´å¤æ‚çš„æ•°æ®å±•ç¤º
  - éœ€è¦è‡ªå®šä¹‰å·¥ä½œæµç¨‹

å¦‚æœAdminå¤Ÿç”¨ï¼Œå°±ä¸éœ€è¦è¿›å…¥é˜¶æ®µäºŒï¼
```

### 4.2 å‰ç«¯æŠ€æœ¯æ ˆï¼ˆç®€åŒ–ç‰ˆï¼‰

```
Vue 3.3+ (ä½¿ç”¨JavaScriptï¼Œä¸ç”¨TypeScript)
Element Plus 2.3+
Axios 1.4+
Vue Router 4 (ç®€åŒ–é…ç½®)
```

### 4.3 å‰ç«¯é¡¹ç›®æ­å»º

```bash
# åˆ›å»ºå‰ç«¯é¡¹ç›®
npm create vue@latest

# é€‰æ‹©é…ç½®
âœ” Project name: frontend
âœ” Add TypeScript? No  # ä¸ä½¿ç”¨TypeScript
âœ” Add JSX Support? No
âœ” Add Vue Router? Yes
âœ” Add Pinia? No  # ç®€å•åœºæ™¯ä¸éœ€è¦
âœ” Add Vitest? No
âœ” Add Cypress? No
âœ” Add ESLint? Yes
âœ” Add Prettier? Yes

cd frontend
npm install
npm install element-plus axios
npm run dev
```

### 4.4 ç®€å•çš„å‰ç«¯ç¤ºä¾‹

```vue
<!-- src/views/ProcurementList.vue -->
<template>
  <div class="procurement-list">
    <el-card>
      <template #header>
        <div class="card-header">
          <span>é‡‡è´­ä¿¡æ¯åˆ—è¡¨</span>
          <el-button type="primary" @click="handleAdd">æ–°å¢é‡‡è´­</el-button>
        </div>
      </template>
      
      <!-- æœç´¢æ¡† -->
      <el-input
        v-model="searchKeyword"
        placeholder="æœç´¢é¡¹ç›®åç§°æˆ–æ‹›é‡‡ç¼–å·"
        @input="handleSearch"
        style="margin-bottom: 20px; width: 300px;"
      />
      
      <!-- æ•°æ®è¡¨æ ¼ -->
      <el-table :data="tableData" stripe style="width: 100%">
        <el-table-column prop="procurement_code" label="æ‹›é‡‡ç¼–å·" width="150"/>
        <el-table-column prop="project_name" label="é‡‡è´­é¡¹ç›®åç§°" width="300"/>
        <el-table-column prop="winning_unit" label="ä¸­æ ‡å•ä½" width="200"/>
        <el-table-column prop="winning_amount" label="ä¸­æ ‡é‡‘é¢" width="150">
          <template #default="scope">
            {{ formatMoney(scope.row.winning_amount) }}
          </template>
        </el-table-column>
        <el-table-column label="æ“ä½œ" width="200">
          <template #default="scope">
            <el-button size="small" @click="handleEdit(scope.row)">ç¼–è¾‘</el-button>
            <el-button size="small" type="danger" @click="handleDelete(scope.row)">
              åˆ é™¤
            </el-button>
          </template>
        </el-table-column>
      </el-table>
      
      <!-- åˆ†é¡µ -->
      <el-pagination
        v-model:current-page="currentPage"
        v-model:page-size="pageSize"
        :total="total"
        @current-change="fetchData"
        style="margin-top: 20px; text-align: right;"
      />
    </el-card>
  </div>
</template>

<script setup>
import { ref, onMounted } from 'vue'
import axios from 'axios'
import { ElMessage } from 'element-plus'

const tableData = ref([])
const searchKeyword = ref('')
const currentPage = ref(1)
const pageSize = ref(20)
const total = ref(0)

// è·å–æ•°æ®
const fetchData = async () => {
  try {
    const response = await axios.get('/api/procurement/', {
      params: {
        page: currentPage.value,
        page_size: pageSize.value,
        search: searchKeyword.value
      }
    })
    tableData.value = response.data.data.results
    total.value = response.data.data.total
  } catch (error) {
    ElMessage.error('è·å–æ•°æ®å¤±è´¥')
  }
}

// æœç´¢
const handleSearch = () => {
  currentPage.value = 1
  fetchData()
}

// æ ¼å¼åŒ–é‡‘é¢
const formatMoney = (amount) => {
  if (!amount) return '-'
  return `Â¥${amount.toLocaleString()}`
}

// æ–°å¢
const handleAdd = () => {
  // è·³è½¬åˆ°æ–°å¢é¡µé¢æˆ–æ‰“å¼€å¯¹è¯æ¡†
}

// ç¼–è¾‘
const handleEdit = (row) => {
  // è·³è½¬åˆ°ç¼–è¾‘é¡µé¢æˆ–æ‰“å¼€å¯¹è¯æ¡†
}

// åˆ é™¤
const handleDelete = async (row) => {
  try {
    await axios.delete(`/api/procurement/${row.procurement_code}`)
    ElMessage.success('åˆ é™¤æˆåŠŸ')
    fetchData()
  } catch (error) {
    ElMessage.error('åˆ é™¤å¤±è´¥')
  }
}

onMounted(() => {
  fetchData()
})
</script>

<style scoped>
.card-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
}
</style>
```

---

## 5. å¸¸è§é—®é¢˜è§£å†³

### 5.1 å¿˜è®°ç®¡ç†å‘˜å¯†ç 

```bash
python manage.py changepassword admin
```

### 5.2 æ•°æ®åº“è¢«é”å®š

```python
# settings.pyæ·»åŠ è¶…æ—¶é…ç½®
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': BASE_DIR / 'db.sqlite3',
        'OPTIONS': {
            'timeout': 20,
        }
    }
}
```

### 5.3 å±€åŸŸç½‘æ— æ³•è®¿é—®

```bash
# 1. ç¡®è®¤ä½¿ç”¨0.0.0.0è€Œä¸æ˜¯127.0.0.1
python manage.py runserver 0.0.0.0:8000

# 2. settings.pyæ·»åŠ 
ALLOWED_HOSTS = ['*']  # å¼€å‘ç¯å¢ƒå¯ä»¥ç”¨*

# 3. æ£€æŸ¥é˜²ç«å¢™æ˜¯å¦å¼€æ”¾8000ç«¯å£
```

### 5.4 ä¸­æ–‡æ˜¾ç¤ºä¹±ç 

```python
# settings.pyç¡®è®¤é…ç½®
LANGUAGE_CODE = 'zh-hans'
TIME_ZONE = 'Asia/Shanghai'
USE_I18N = True
USE_TZ = True
```

### 5.5 Excelå¯¼å…¥å¤±è´¥

```python
# æ£€æŸ¥Excelæ–‡ä»¶æ ¼å¼
# 1. ç¡®ä¿æ˜¯.xlsxæ ¼å¼ï¼ˆä¸æ˜¯.xlsï¼‰
# 2. ç¡®ä¿åˆ—åä¸æ¨¡å‹å­—æ®µå¯¹åº”
# 3. 
æŸ¥çœ‹é”™è¯¯æ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯
```

---

## 6. æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 6.1 æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

```python
# ä½¿ç”¨select_relatedå‡å°‘æ•°æ®åº“æŸ¥è¯¢
contracts = Contract.objects.select_related('procurement', 'parent_contract').all()

# ä½¿ç”¨prefetch_relatedä¼˜åŒ–åå‘å…³ç³»
contracts = Contract.objects.prefetch_related('payments', 'evaluations').all()

# æ·»åŠ æ•°æ®åº“ç´¢å¼•
class Contract(models.Model):
    signing_date = models.DateField(db_index=True)  # æ·»åŠ ç´¢å¼•
```

### 6.2 åˆ†é¡µæŸ¥è¯¢

```python
# åœ¨Adminä¸­é…ç½®åˆ†é¡µ
class ProcurementAdmin(admin.ModelAdmin):
    list_per_page = 20  # æ¯é¡µæ˜¾ç¤º20æ¡
```

---

## 7. é¡¹ç›®ç»“æ„æ€»è§ˆ

```
procurement_system/
â”œâ”€â”€ config/                    # é¡¹ç›®é…ç½®
â”‚   â”œâ”€â”€ settings.py           # Djangoè®¾ç½®
â”‚   â”œâ”€â”€ urls.py              # è·¯ç”±é…ç½®
â”‚   â””â”€â”€ wsgi.py              # WSGIé…ç½®
â”œâ”€â”€ procurement/              # é‡‡è´­ç®¡ç†åº”ç”¨
â”‚   â”œâ”€â”€ models.py            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ admin.py             # Adminé…ç½®
â”‚   â””â”€â”€ management/          # ç®¡ç†å‘½ä»¤
â”‚       â””â”€â”€ commands/
â”‚           â””â”€â”€ import_excel.py
â”œâ”€â”€ contract/                 # åˆåŒç®¡ç†åº”ç”¨
â”œâ”€â”€ payment/                  # ä»˜æ¬¾ç®¡ç†åº”ç”¨
â”‚   â””â”€â”€ management/
â”‚       â””â”€â”€ commands/
â”‚           â””â”€â”€ convert_wide_to_long.py
â”œâ”€â”€ settlement/               # ç»“ç®—ç®¡ç†åº”ç”¨
â”œâ”€â”€ supplier_eval/            # ä¾›åº”å•†è¯„ä»·åº”ç”¨
â”œâ”€â”€ db.sqlite3               # SQLiteæ•°æ®åº“æ–‡ä»¶
â”œâ”€â”€ backup_db.py             # å¤‡ä»½è„šæœ¬
â”œâ”€â”€ backups/                 # å¤‡ä»½ç›®å½•
â”œâ”€â”€ manage.py                # Djangoç®¡ç†è„šæœ¬
â””â”€â”€ requirements.txt         # Pythonä¾èµ–

requirements.txtå†…å®¹ï¼š
Django==4.2.7
pandas==2.0.3
openpyxl==3.1.2
```

---

## 8. 2å‘¨å¼€å‘è®¡åˆ’

### ç¬¬1å‘¨ï¼šç¯å¢ƒæ­å»ºä¸æ ¸å¿ƒæ¨¡å‹

**ç¬¬1å¤©ï¼šç¯å¢ƒå‡†å¤‡**
- [ ] å®‰è£…Python 3.10+
- [ ] åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
- [ ] å®‰è£…Djangoå’Œä¾èµ–
- [ ] åˆ›å»ºDjangoé¡¹ç›®
- [ ] å­¦ä¹ DjangoåŸºç¡€ï¼ˆè·Ÿéšå®˜æ–¹æ•™ç¨‹ç¬¬1-2éƒ¨åˆ†ï¼‰

**ç¬¬2å¤©ï¼šæ•°æ®æ¨¡å‹è®¾è®¡**
- [ ] åˆ›å»º5ä¸ªåº”ç”¨ï¼ˆprocurement, contract, payment, settlement, supplier_evalï¼‰
- [ ] å®šä¹‰Procurementæ¨¡å‹
- [ ] å®šä¹‰Contractæ¨¡å‹
- [ ] æ‰§è¡Œæ•°æ®åº“è¿ç§»
- [ ] æµ‹è¯•æ¨¡å‹åˆ›å»ºå’ŒæŸ¥è¯¢

**ç¬¬3å¤©ï¼šå®Œå–„æ¨¡å‹**
- [ ] å®šä¹‰Paymentæ¨¡å‹
- [ ] å®šä¹‰Settlementæ¨¡å‹
- [ ] å®šä¹‰SupplierEvaluationæ¨¡å‹
- [ ] æ·»åŠ æ•°æ®éªŒè¯é€»è¾‘
- [ ] æµ‹è¯•æ¨¡å‹å…³è”å…³ç³»

**ç¬¬4å¤©ï¼šé…ç½®Adminåå°**
- [ ] é…ç½®Procurement Admin
- [ ] é…ç½®Contract Admin
- [ ] é…ç½®Payment Admin
- [ ] é…ç½®Settlement Admin
- [ ] é…ç½®SupplierEvaluation Admin
- [ ] åˆ›å»ºè¶…çº§ç”¨æˆ·å¹¶æµ‹è¯•

**ç¬¬5å¤©ï¼šExcelå¯¼å…¥åŸºç¡€**
- [ ] ç¼–å†™é‡‡è´­æ•°æ®å¯¼å…¥å‘½ä»¤
- [ ] ç¼–å†™åˆåŒæ•°æ®å¯¼å…¥å‘½ä»¤
- [ ] æµ‹è¯•æ ‡å‡†Excelå¯¼å…¥åŠŸèƒ½
- [ ] å‡†å¤‡æµ‹è¯•æ•°æ®

### ç¬¬2å‘¨ï¼šExcelè½¬æ¢ä¸éƒ¨ç½²

**ç¬¬6å¤©ï¼šå®½è¡¨è½¬é•¿è¡¨åŠŸèƒ½**
- [ ] ç¼–å†™ä»˜æ¬¾å®½è¡¨è½¬é•¿è¡¨å‘½ä»¤
- [ ] ç¼–å†™è¯„ä»·å®½è¡¨è½¬é•¿è¡¨å‘½ä»¤
- [ ] æµ‹è¯•è½¬æ¢åŠŸèƒ½
- [ ] å¤„ç†å¼‚å¸¸æƒ…å†µ

**ç¬¬7å¤©ï¼šæ•°æ®å¯¼å…¥æµ‹è¯•**
- [ ] å‡†å¤‡å†å²æ•°æ®
- [ ] æ‰¹é‡å¯¼å…¥é‡‡è´­æ•°æ®
- [ ] æ‰¹é‡å¯¼å…¥åˆåŒæ•°æ®
- [ ] è½¬æ¢å¹¶å¯¼å…¥ä»˜æ¬¾æ•°æ®
- [ ] éªŒè¯æ•°æ®å®Œæ•´æ€§

**ç¬¬8å¤©ï¼šåŠŸèƒ½å®Œå–„**
- [ ] ä¼˜åŒ–Adminç•Œé¢
- [ ] æ·»åŠ æœç´¢å’Œè¿‡æ»¤
- [ ] é…ç½®æ•°æ®å±•ç¤ºå­—æ®µ
- [ ] æµ‹è¯•æ‰€æœ‰åŠŸèƒ½

**ç¬¬9å¤©ï¼šå¤‡ä»½ä¸éƒ¨ç½²**
- [ ] ç¼–å†™æ•°æ®åº“å¤‡ä»½è„šæœ¬
- [ ] é…ç½®Windowsä»»åŠ¡è®¡åˆ’ç¨‹åº
- [ ] é…ç½®Windowsé˜²ç«å¢™
- [ ] å¯åŠ¨å¼€å‘æœåŠ¡å™¨
- [ ] å±€åŸŸç½‘è®¿é—®æµ‹è¯•

**ç¬¬10å¤©ï¼šåŸ¹è®­ä¸æ–‡æ¡£**
- [ ] ç¼–å†™ç”¨æˆ·æ“ä½œæ‰‹å†Œ
- [ ] è¿›è¡Œç”¨æˆ·åŸ¹è®­
- [ ] æ”¶é›†åé¦ˆ
- [ ] ä¿®å¤é—®é¢˜
- [ ] æ­£å¼ä¸Šçº¿

---

## 9. å­¦ä¹ èµ„æº

### 9.1 Djangoå­¦ä¹ 

**å®˜æ–¹æ–‡æ¡£ï¼ˆå¿…è¯»ï¼‰ï¼š**
- Djangoå®˜æ–¹æ•™ç¨‹ï¼šhttps://docs.djangoproject.com/zh-hans/4.2/intro/tutorial01/
- Django Adminæ–‡æ¡£ï¼šhttps://docs.djangoproject.com/zh-hans/4.2/ref/contrib/admin/

**è§†é¢‘æ•™ç¨‹ï¼š**
- Bç«™æœç´¢"Djangoå…¥é—¨æ•™ç¨‹"
- æ¨èUPä¸»çš„ç³»åˆ—æ•™ç¨‹

**æ¨èä¹¦ç±ï¼š**
- ã€ŠDjangoä¼ä¸šå¼€å‘å®æˆ˜ã€‹
- ã€Šç²¾é€šDjangoã€‹

### 9.2 Pythonæ•°æ®å¤„ç†

**Pandaså­¦ä¹ ï¼š**
- Pandaså®˜æ–¹æ•™ç¨‹ï¼šhttps://pandas.pydata.org/docs/getting_started/index.html
- ã€Šåˆ©ç”¨Pythonè¿›è¡Œæ•°æ®åˆ†æã€‹

### 9.3 å‰ç«¯å­¦ä¹ ï¼ˆé˜¶æ®µäºŒéœ€è¦ï¼‰

**Vue 3å­¦ä¹ ï¼š**
- Vue 3å®˜æ–¹æ–‡æ¡£ï¼šhttps://cn.vuejs.org/
- Element Plusæ–‡æ¡£ï¼šhttps://element-plus.org/zh-CN/

---

## 10. æ€»ç»“

### 10.1 ä¸ºä»€ä¹ˆé€‰æ‹©è¿™ä¸ªæ–¹æ¡ˆï¼Ÿ

```
âœ… å­¦ä¹ æˆæœ¬ä½
   - Django Adminæ— éœ€ç¼–å†™å‰ç«¯ä»£ç 
   - SQLiteé›¶é…ç½®
   - 2å‘¨å†…å¯å®Œæˆ

âœ… ç»´æŠ¤ç®€å•
   - å¤‡ä»½=å¤åˆ¶æ–‡ä»¶
   - æ— éœ€ä¸“ä¸šDBA
   - é—®é¢˜å®¹æ˜“æ’æŸ¥

âœ… æ€§èƒ½è¶³å¤Ÿ
   - æ”¯æŒ10ä¸‡æ¡æ•°æ®
   - å“åº”æ—¶é—´<1ç§’
   - æ»¡è¶³20äººä½¿ç”¨

âœ… å¯æ‰©å±•
   - éœ€è¦æ—¶å¯å‡çº§åˆ°PostgreSQL
   - å¯æ·»åŠ Vueå‰ç«¯
   - å¯å¢åŠ é«˜çº§åŠŸèƒ½
```

### 10.2 ä½•æ—¶éœ€è¦å‡çº§ï¼Ÿ

```
å‡çº§åˆ°PostgreSQLï¼ˆé˜¶æ®µä¸‰ï¼‰å½“ï¼š
âŒ æ•°æ®é‡è¶…è¿‡50ä¸‡æ¡
âŒ å¹¶å‘ç”¨æˆ·è¶…è¿‡100äºº
âŒ éœ€è¦å¤æ‚çš„æ•°æ®åˆ†æ
âŒ éœ€è¦å¤šæœåŠ¡å™¨éƒ¨ç½²

åœ¨æ­¤ä¹‹å‰ï¼Œä¿æŒç®€å•å°±å¥½ï¼
```

### 10.3 ç»™åˆå­¦è€…çš„æœ€åå»ºè®®

```
1. ä¸è¦å®³æ€•
   - Djangoæ¯”ä½ æƒ³è±¡çš„ç®€å•
   - AdminåŠŸèƒ½å¾ˆå¼ºå¤§
   - é‡åˆ°é—®é¢˜Google/GPTéƒ½èƒ½è§£å†³

2. å…ˆè®©å®ƒè¿è¡Œèµ·æ¥
   - ä¸è¦è¿½æ±‚å®Œç¾
   - èƒ½ç”¨å°±æ˜¯å¥½çš„
   - åç»­å¯ä»¥ä¼˜åŒ–

3. æ¸è¿›å¼å¼€å‘
   - ä»æœ€ç®€å•çš„å¼€å§‹
   - ä¸€ä¸ªåŠŸèƒ½ä¸€ä¸ªåŠŸèƒ½åŠ 
   - æ ¹æ®åé¦ˆæ”¹è¿›

4. ä¿æŒå­¦ä¹ 
   - é‡åˆ°ä¸æ‡‚çš„å°±å­¦
   - åšä¸­å­¦æœ€å¿«
   - 2å‘¨åä½ ä¼šå‘ç°å…¶å®ä¸éš¾

åŠ æ²¹ï¼ä½ ä¸€å®šå¯ä»¥çš„ï¼ğŸš€
```

---

## é™„å½•Aï¼šå®Œæ•´çš„requirements.txt

```txt
Django==4.2.7
pandas==2.0.3
openpyxl==3.1.2
python-dateutil==2.8.2
```

## é™„å½•Bï¼šå¿«é€Ÿå‘½ä»¤å‚è€ƒ

```bash
# ç¯å¢ƒç®¡ç†
python -m venv venv                    # åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
venv\Scripts\activate                  # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆWindowsï¼‰
source venv/bin/activate               # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆLinux/Macï¼‰
pip install -r requirements.txt        # å®‰è£…ä¾èµ–

# Djangoé¡¹ç›®ç®¡ç†
django-admin startproject config .     # åˆ›å»ºé¡¹ç›®
python manage.py startapp appname      # åˆ›å»ºåº”ç”¨
python manage.py makemigrations        # åˆ›å»ºè¿ç§»æ–‡ä»¶
python manage.py migrate               # æ‰§è¡Œè¿ç§»
python manage.py createsuperuser       # åˆ›å»ºç®¡ç†å‘˜
python manage.py runserver 0.0.0.0:8000  # å¯åŠ¨æœåŠ¡å™¨

# æ•°æ®ç®¡ç†
python manage.py import_excel data.xlsx              # å¯¼å…¥Excel
python manage.py convert_wide_to_long payment.xlsx   # è½¬æ¢å®½è¡¨
python backup_db.py                                  # å¤‡ä»½æ•°æ®åº“

# å…¶ä»–
python manage.py shell                 # è¿›å…¥Django Shell
python manage.py dbshell               # è¿›å…¥æ•°æ®åº“Shell
python manage.py changepassword admin  # ä¿®æ”¹ç®¡ç†å‘˜å¯†ç 
```

## é™„å½•Cï¼šå¸¸ç”¨Adminé…ç½®

```python
# å®Œæ•´çš„Adminé…ç½®ç¤ºä¾‹
@admin.register(ModelName)
class ModelNameAdmin(admin.ModelAdmin):
    # åˆ—è¡¨é¡µæ˜¾ç¤ºå­—æ®µ
    list_display = ['field1', 'field2', 'field3']
    
    # æœç´¢å­—æ®µ
    search_fields = ['field1', 'field2']
    
    # è¿‡æ»¤å™¨
    list_filter = ['category', 'created_at']
    
    # æ¯é¡µæ˜¾ç¤ºæ•°é‡
    list_per_page = 20
    
    # å¯ç¼–è¾‘å­—æ®µï¼ˆåˆ—è¡¨é¡µç›´æ¥ç¼–è¾‘ï¼‰
    list_editable = ['status']
    
    # æ’åº
    ordering = ['-created_at']
    
    # æ—¥æœŸå±‚çº§å¯¼èˆª
    date_hierarchy = 'created_at'
    
    # è‡ªåŠ¨è¡¥å…¨å­—æ®µ
    autocomplete_fields = ['foreign_key_field']
    
    # åªè¯»å­—æ®µ
    readonly_fields = ['created_at', 'updated_at']
    
    # å­—æ®µåˆ†ç»„
    fieldsets = (
        ('åŸºæœ¬ä¿¡æ¯', {
            'fields': ('field1', 'field2')
        }),
        ('è¯¦ç»†ä¿¡æ¯', {
            'fields': ('field3', 'field4'),
            'classes': ('collapse',)  # å¯æŠ˜å 
        }),
    )
```

---

**æ–‡æ¡£ç‰ˆæœ¬ï¼š** v1.0 ç®€åŒ–ç‰ˆ  
**æœ€åæ›´æ–°ï¼š** 2025å¹´10æœˆ20æ—¥  
**é€‚ç”¨äººç¾¤ï¼š** åˆå­¦è€…ã€å°è§„æ¨¡ç³»ç»Ÿ  
**é¢„è®¡å¼€å‘æ—¶é—´ï¼š** 2å‘¨

**ç¥ä½ æˆåŠŸï¼** ğŸ‰
