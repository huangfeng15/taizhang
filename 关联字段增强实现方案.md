# 采购、合同、付款模块关联字段增强实现方案

## 📋 项目概述

本文档详细描述了为采购、合同、付款模块添加关联信息选择功能的完整实现方案，包括智能下拉选择、级联筛选和用户体验优化。

## 🎯 核心需求

1. **采购管理**：需要添加项目关联选择功能
2. **合同管理**：需要添加项目和采购关联选择功能
3. **付款管理**：需要优化合同关联选择功能
4. **用户体验**：实现智能下拉选择，支持搜索和级联筛选
5. **数据完整性**：确保关联关系的正确性和一致性

## 🔧 技术实现方案

### 1. 表单字段增强

#### 1.1 采购表单 (ProcurementForm)

**当前问题**：
- 缺少项目关联选择字段
- 用户无法将采购与项目关联

**解决方案**：
```python
class ProcurementForm(forms.ModelForm):
    project = forms.ModelChoiceField(
        queryset=Project.objects.all(),
        required=False,
        widget=forms.Select(attrs={
            'class': 'form-control smart-selector',
            'data-url': '/api/projects/',
            'data-search-fields': 'project_code,project_name',
            'data-display-format': '{project_code} - {project_name}',
            'data-placeholder': '搜索项目编码或名称...',
            'data-allow-clear': 'true'
        }),
        help_text='选择所属项目，可搜索项目编码或名称'
    )
    
    class Meta:
        model = Procurement
        fields = [
            'project',  # 新增项目关联字段
            'procurement_code',
            'project_name',
            'procurement_unit',
            'procurement_category',
            'procurement_platform',
            'procurement_method',
            'qualification_review_method',
            'bid_evaluation_method',
            'bid_awarding_method',
            'budget_amount',
            'control_price',
            'winning_amount',
            'procurement_officer',
            'demand_department',
            'demand_contact',
            'winning_bidder',
            'winning_contact',
            'planned_completion_date',
            'requirement_approval_date',
            'announcement_release_date',
            'registration_deadline',
            'bid_opening_date',
            'candidate_publicity_end_date',
            'result_publicity_release_date',
            'notice_issue_date',
            'archive_date',
            'evaluation_committee',
            'bid_guarantee',
            'bid_guarantee_return_date',
            'performance_guarantee',
            'candidate_publicity_issue',
            'non_bidding_explanation',
        ]
```

#### 1.2 合同表单 (ContractForm)

**当前问题**：
- 缺少项目关联选择字段
- 采购关联字段未优化用户体验

**解决方案**：
```python
class ContractForm(forms.ModelForm):
    project = forms.ModelChoiceField(
        queryset=Project.objects.all(),
        required=False,
        widget=forms.Select(attrs={
            'class': 'form-control smart-selector',
            'data-url': '/api/projects/',
            'data-search-fields': 'project_code,project_name',
            'data-display-format': '{project_code} - {project_name}',
            'data-placeholder': '搜索项目编码或名称...',
            'data-dependent-field': '',  # 顶级字段
            'data-target-field': 'procurement'  # 影响的目标字段
        }),
        help_text='选择所属项目，可搜索项目编码或名称'
    )
    
    procurement = forms.ModelChoiceField(
        queryset=Procurement.objects.all(),
        required=False,
        widget=forms.Select(attrs={
            'class': 'form-control smart-selector',
            'data-url': '/api/procurements/',
            'data-search-fields': 'procurement_code,project_name',
            'data-display-format': '{procurement_code} - {project_name}',
            'data-placeholder': '先选择项目，再搜索采购...',
            'data-dependent-field': 'project'  # 依赖项目字段
        }),
        help_text='选择关联采购，可搜索采购编号或项目名称'
    )
    
    class Meta:
        model = Contract
        fields = [
            'project',      # 新增项目关联字段
            'procurement',   # 增强采购关联字段
            'contract_code',
            'contract_name',
            'file_positioning',
            'contract_source',
            'parent_contract',
            'contract_sequence',
            'party_a',
            'party_b',
            'party_a_legal_representative',
            'party_a_contact_person',
            'party_a_manager',
            'party_b_legal_representative',
            'party_b_contact_person',
            'party_b_manager',
            'contract_amount',
            'signing_date',
            'duration',
            'contract_officer',
            'payment_method',
            'performance_guarantee_return_date',
            'archive_date',
        ]
```

#### 1.3 付款表单 (PaymentForm)

**当前问题**：
- 合同关联字段未优化用户体验
- 缺少项目筛选功能

**解决方案**：
```python
class PaymentForm(forms.ModelForm):
    # 可选：添加项目字段用于筛选
    project = forms.ModelChoiceField(
        queryset=Project.objects.all(),
        required=False,
        widget=forms.Select(attrs={
            'class': 'form-control smart-selector',
            'data-url': '/api/projects/',
            'data-search-fields': 'project_code,project_name',
            'data-display-format': '{project_code} - {project_name}',
            'data-placeholder': '选择项目以筛选合同...',
            'data-target-field': 'contract'  # 影响合同字段
        }),
        help_text='选择项目以筛选合同列表（可选）'
    )
    
    contract = forms.ModelChoiceField(
        queryset=Contract.objects.all(),
        required=True,
        widget=forms.Select(attrs={
            'class': 'form-control smart-selector',
            'data-url': '/api/contracts/',
            'data-search-fields': 'contract_code,contract_name,contract_sequence',
            'data-display-format': '{contract_sequence} - {contract_name}',
            'data-placeholder': '搜索合同编号、序号或名称...',
            'data-dependent-field': 'project'  # 可依赖项目字段
        }),
        help_text='选择关联合同，可搜索合同编号、序号或名称'
    )
    
    class Meta:
        model = Payment
        fields = [
            'project',      # 新增项目筛选字段
            'contract',     # 增强合同关联字段
            'payment_code',
            'payment_amount',
            'payment_date',
            'settlement_amount',
            'is_settled',
            'settlement_archive_date',
        ]
```

### 2. API接口设计

#### 2.1 URL配置更新

在 `config/urls.py` 中添加以下API路由：

```python
# 级联数据API
path('api/projects/', views.api_projects_list, name='api_projects_list'),
path('api/procurements/', views.api_procurements_list, name='api_procurements_list'),
path('api/contracts/', views.api_contracts_list, name='api_contracts_list'),
path('api/payments/', views.api_payments_list, name='api_payments_list'),
```

#### 2.2 视图函数实现

在 `project/views.py` 中添加以下API视图：

```python
from django.http import JsonResponse
from django.core.paginator import Paginator
from django.db.models import Q

def api_projects_list(request):
    """项目列表API - 支持搜索和分页"""
    search = request.GET.get('search', '')
    page = int(request.GET.get('page', 1))
    page_size = int(request.GET.get('page_size', 20))
    
    projects = Project.objects.all()
    
    if search:
        projects = projects.filter(
            Q(project_code__icontains=search) |
            Q(project_name__icontains=search)
        )
    
    paginator = Paginator(projects, page_size)
    page_obj = paginator.get_page(page)
    
    data = [{
        'id': project.project_code,
        'project_code': project.project_code,
        'project_name': project.project_name,
        'display_text': f"{project.project_code} - {project.project_name}"
    } for project in page_obj]
    
    return JsonResponse({
        'success': True,
        'data': data,
        'pagination': {
            'current_page': page_obj.number,
            'total_pages': paginator.num_pages,
            'total_count': paginator.count,
            'has_next': page_obj.has_next(),
            'has_previous': page_obj.has_previous()
        }
    })

def api_procurements_list(request):
    """采购列表API - 支持项目筛选和搜索"""
    search = request.GET.get('search', '')
    project = request.GET.get('project', '')
    page = int(request.GET.get('page', 1))
    page_size = int(request.GET.get('page_size', 20))
    
    procurements = Procurement.objects.select_related('project')
    
    if project:
        procurements = procurements.filter(project__project_code=project)
    
    if search:
        procurements = procurements.filter(
            Q(procurement_code__icontains=search) |
            Q(project_name__icontains=search)
        )
    
    paginator = Paginator(procurements, page_size)
    page_obj = paginator.get_page(page)
    
    data = [{
        'id': procurement.procurement_code,
        'procurement_code': procurement.procurement_code,
        'project_name': procurement.project_name,
        'project_code': procurement.project.project_code if procurement.project else '',
        'display_text': f"{procurement.procurement_code} - {procurement.project_name}"
    } for procurement in page_obj]
    
    return JsonResponse({
        'success': True,
        'data': data,
        'pagination': {
            'current_page': page_obj.number,
            'total_pages': paginator.num_pages,
            'total_count': paginator.count,
            'has_next': page_obj.has_next(),
            'has_previous': page_obj.has_previous()
        }
    })

def api_contracts_list(request):
    """合同列表API - 支持项目和采购筛选"""
    search = request.GET.get('search', '')
    project = request.GET.get('project', '')
    procurement = request.GET.get('procurement', '')
    page = int(request.GET.get('page', 1))
    page_size = int(request.GET.get('page_size', 20))
    
    contracts = Contract.objects.select_related('project', 'procurement')
    
    if project:
        contracts = contracts.filter(project__project_code=project)
    
    if procurement:
        contracts = contracts.filter(procurement__procurement_code=procurement)
    
    if search:
        contracts = contracts.filter(
            Q(contract_code__icontains=search) |
            Q(contract_name__icontains=search) |
            Q(contract_sequence__icontains=search)
        )
    
    paginator = Paginator(contracts, page_size)
    page_obj = paginator.get_page(page)
    
    data = [{
        'id': contract.contract_code,
        'contract_code': contract.contract_code,
        'contract_name': contract.contract_name,
        'contract_sequence': contract.contract_sequence or '',
        'project_code': contract.project.project_code if contract.project else '',
        'project_name': contract.project.project_name if contract.project else '',
        'procurement_code': contract.procurement.procurement_code if contract.procurement else '',
        'display_text': f"{contract.contract_sequence or contract.contract_code} - {contract.contract_name}"
    } for contract in page_obj]
    
    return JsonResponse({
        'success': True,
        'data': data,
        'pagination': {
            'current_page': page_obj.number,
            'total_pages': paginator.num_pages,
            'total_count': paginator.count,
            'has_next': page_obj.has_next(),
            'has_previous': page_obj.has_previous()
        }
    })
```

### 3. 智能选择器组件

#### 3.1 JavaScript组件实现

创建 `project/static/js/smart-selector.js`：

```javascript
/**
 * 智能选择器组件 - 支持搜索、分页、级联筛选
 */
class SmartSelector {
    constructor(element, options) {
        this.element = element;
        this.options = {
            url: options.url,
            dependentField: options.dependentField || null,
            searchFields: options.searchFields || ['name'],
            displayFormat: options.displayFormat || '{name}',
            valueField: options.valueField || 'id',
            placeholder: options.placeholder || '请选择...',
            allowClear: options.allowClear !== false,
            pageSize: options.pageSize || 20,
            onSelect: options.onSelect || null,
            onChange: options.onChange || null
        };
        
        this.currentPage = 1;
        this.totalPages = 1;
        this.searchKeyword = '';
        this.selectedItem = null;
        this.isLoading = false;
        
        this.init();
    }
    
    init() {
        this.createDropdown();
        this.bindEvents();
        this.loadInitialData();
    }
    
    createDropdown() {
        // 隐藏原始select元素
        this.element.style.display = 'none';
        
        // 创建自定义选择器容器
        this.wrapper = document.createElement('div');
        this.wrapper.className = 'smart-selector-wrapper';
        
        // 创建显示框
        this.display = document.createElement('div');
        this.display.className = 'smart-selector-display form-control';
        this.display.innerHTML = `<span class="placeholder">${this.options.placeholder}</span>`;
        
        // 创建下拉箭头
        this.arrow = document.createElement('div');
        this.arrow.className = 'smart-selector-arrow';
        this.arrow.innerHTML = '▼';
        
        // 创建下拉面板
        this.dropdown = document.createElement('div');
        this.dropdown.className = 'smart-selector-dropdown';
        this.dropdown.style.display = 'none';
        
        // 创建搜索框
        this.searchContainer = document.createElement('div');
        this.searchContainer.className = 'smart-selector-search';
        this.searchInput = document.createElement('input');
        this.searchInput.type = 'text';
        this.searchInput.placeholder = '搜索...';
        this.searchContainer.appendChild(this.searchInput);
        
        // 创建选项容器
        this.optionsContainer = document.createElement('div');
        this.optionsContainer.className = 'smart-selector-options';
        
        // 创建分页容器
        this.paginationContainer = document.createElement('div');
        this.paginationContainer.className = 'smart-selector-pagination';
        
        // 组装下拉面板
        this.dropdown.appendChild(this.searchContainer);
        this.dropdown.appendChild(this.optionsContainer);
        this.dropdown.appendChild(this.paginationContainer);
        
        // 组装完整组件
        this.display.appendChild(this.arrow);
        this.wrapper.appendChild(this.display);
        this.wrapper.appendChild(this.dropdown);
        
        // 插入到DOM
        this.element.parentNode.insertBefore(this.wrapper, this.element);
        
        // 保存引用
        this.element._smartSelector = this;
    }
    
    bindEvents() {
        // 点击显示/隐藏下拉框
        this.display.addEventListener('click', (e) => {
            e.stopPropagation();
            this.toggle();
        });
        
        // 搜索输入
        this.searchInput.addEventListener('input', (e) => {
            clearTimeout(this.searchTimeout);
            this.searchTimeout = setTimeout(() => {
                this.search(e.target.value);
            }, 300);
        });
        
        // 点击外部关闭
        document.addEventListener('click', (e) => {
            if (!this.wrapper.contains(e.target)) {
                this.hide();
            }
        });
        
        // 监听依赖字段变化
        if (this.options.dependentField) {
            const dependentField = document.querySelector(`[name="${this.options.dependentField}"]`);
            if (dependentField) {
                dependentField.addEventListener('change', (e) => {
                    this.filterByDependency(e.target.value);
                });
            }
        }
    }
    
    async loadInitialData() {
        await this.loadData();
    }
    
    async loadData(params = {}) {
        if (this.isLoading) return;
        
        this.isLoading = true;
        this.showLoading();
        
        try {
            const queryParams = new URLSearchParams({
                page: this.currentPage,
                page_size: this.options.pageSize,
                ...params
            });
            
            const response = await fetch(`${this.options.url}?${queryParams}`);
            const result = await response.json();
            
            if (result.success) {
                this.renderOptions(result.data);
                this.updatePagination(result.pagination);
                this.totalPages = result.pagination.total_pages;
            } else {
                this.showError('加载数据失败');
            }
        } catch (error) {
            this.showError('网络错误，请重试');
        } finally {
            this.isLoading = false;
        }
    }
    
    renderOptions(data) {
        this.optionsContainer.innerHTML = '';
        
        if (data.length === 0) {
            this.optionsContainer.innerHTML = '<div class="smart-selector-empty">暂无数据</div>';
            return;
        }
        
        data.forEach(item => {
            const option = document.createElement('div');
            option.className = 'smart-selector-option';
            option.innerHTML = item.display_text;
            option.dataset.value = item.id;
            option.dataset.item = JSON.stringify(item);
            
            option.addEventListener('click', () => {
                this.select(item);
            });
            
            this.optionsContainer.appendChild(option);
        });
    }
    
    select(item) {
        this.selectedItem = item;
        this.element.value = item.id;
        this.display.innerHTML = `<span class="selected-text">${item.display_text}</span>`;
        this.hide();
        
        // 触发选择回调
        if (this.options.onSelect) {
            this.options.onSelect(item);
        }
        
        // 触发change事件
        this.element.dispatchEvent(new Event('change'));
    }
    
    async search(keyword) {
        this.searchKeyword = keyword;
        this.currentPage = 1;
        
        await this.loadData({
            search: keyword
        });
    }
    
    async filterByDependency(dependentValue) {
        this.currentPage = 1;
        this.selectedItem = null;
        this.element.value = '';
        this.display.innerHTML = `<span class="placeholder">${this.options.placeholder}</span>`;
        
        if (dependentValue) {
            await this.loadData({
                [this.options.dependentField]: dependentValue
            });
        } else {
            await this.loadData();
        }
    }
    
    show() {
        this.dropdown.style.display = 'block';
        this.searchInput.focus();
    }
    
    hide() {
        this.dropdown.style.display = 'none';
    }
    
    toggle() {
        if (this.dropdown.style.display === 'none') {
            this.show();
        } else {
            this.hide();
        }
    }
    
    showLoading() {
        this.optionsContainer.innerHTML = '<div class="smart-selector-loading">加载中...</div>';
    }
    
    showError(message) {
        this.optionsContainer.innerHTML = `<div class="smart-selector-error">${message}</div>`;
    }
    
    updatePagination(pagination) {
        if (pagination.total_pages <= 1) {
            this.paginationContainer.innerHTML = '';
            return;
        }
        
        let paginationHTML = `<div class="pagination-info">`;
        paginationHTML += `第 ${pagination.current_page} 页，共 ${pagination.total_pages} 页`;
        paginationHTML += `</div>`;
        
        if (pagination.has_previous) {
            paginationHTML += `<button class="pagination-btn" data-page="${pagination.current_page - 1}">上一页</button>`;
        }
        
        if (pagination.has_next) {
            paginationHTML += `<button class="pagination-btn" data-page="${pagination.current_page + 1}">下一页</button>`;
        }
        
        this.paginationContainer.innerHTML = paginationHTML;
        
        // 绑定分页按钮事件
        this.paginationContainer.querySelectorAll('.pagination-btn').forEach(btn => {
            btn.addEventListener('click', async () => {
                this.currentPage = parseInt(btn.dataset.page);
                await this.loadData({
                    search: this.searchKeyword
                });
            });
        });
    }
    
    clear() {
        this.selectedItem = null;
        this.element.value = '';
        this.display.innerHTML = `<span class="placeholder">${this.options.placeholder}</span>`;
        
        if (this.options.onChange) {
            this.options.onChange(null);
        }
        
        this.element.dispatchEvent(new Event('change'));
    }
}

// 自动初始化所有智能选择器
document.addEventListener('DOMContentLoaded', () => {
    const selectors = document.querySelectorAll('.smart-selector');
    selectors.forEach(selectElement => {
        new SmartSelector(selectElement, {
            url: selectElement.dataset.url,
            dependentField: selectElement.dataset.dependentField || null,
            searchFields: selectElement.dataset.searchFields.split(','),
            displayFormat: selectElement.dataset.displayFormat,
            placeholder: selectElement.dataset.placeholder,
            allowClear: selectElement.dataset.allowClear === 'true'
        });
    });
});
```

#### 3.2 CSS样式

创建 `project/static/css/smart-selector.css`：

```css
/* 智能选择器样式 */
.smart-selector-wrapper {
    position: relative;
    width: 100%;
}

.smart-selector-display {
    min-height: 38px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding-right: 12px;
    background-color: #fff;
    border: 1px solid #d9d9d9;
    border-radius: 6px;
    transition: border-color 0.3s ease;
}

.smart-selector-display:hover {
    border-color: #40a9ff;
}

.smart-selector-display:focus {
    border-color: #40a9ff;
    box-shadow: 0 0 0 2px rgba(24, 144, 255, 0.2);
    outline: none;
}

.smart-selector-arrow {
    font-size: 12px;
    color: #999;
    transition: transform 0.3s ease;
}

.smart-selector-wrapper.open .smart-selector-arrow {
    transform: rotate(180deg);
}

.smart-selector-dropdown {
    position: absolute;
    top: 100%;
    left: 0;
    right: 0;
    background: white;
    border: 1px solid #d9d9d9;
    border-radius: 6px;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
    z-index: 1000;
    max-height: 320px;
    overflow: hidden;
    margin-top: 4px;
}

.smart-selector-search {
    padding: 8px 12px;
    border-bottom: 1px solid #f0f0f0;
}

.smart-selector-search input {
    width: 100%;
    padding: 6px 8px;
    border: 1px solid #d9d9d9;
    border-radius: 4px;
    outline: none;
    font-size: 14px;
}

.smart-selector-search input:focus {
    border-color: #40a9ff;
}

.smart-selector-options {
    max-height: 250px;
    overflow-y: auto;
}

.smart-selector-option {
    padding: 8px 12px;
    cursor: pointer;
    border-bottom: 1px solid #f5f5f5;
    font-size: 14px;
    line-height: 1.5;
    transition: background-color 0.2s ease;
}

.smart-selector-option:hover {
    background-color: #f5f5f5;
}

.smart-selector-option.selected {
    background-color: #e6f7ff;
    color: #1890ff;
}

.smart-selector-option:last-child {
    border-bottom: none;
}

.smart-selector-loading,
.smart-selector-empty,
.smart-selector-error {
    padding: 20px;
    text-align: center;
    color: #999;
    font-size: 14px;
}

.smart-selector-error {
    color: #ff4d4f;
}

.smart-selector-pagination {
    padding: 8px 12px;
    border-top: 1px solid #f0f0f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-size: 12px;
    color: #666;
}

.pagination-info {
    flex: 1;
}

.pagination-btn {
    padding: 4px 8px;
    margin: 0 2px;
    border: 1px solid #d9d9d9;
    border-radius: 4px;
    background: white;
    cursor: pointer;
    font-size: 12px;
    transition: all 0.2s ease;
}

.pagination-btn:hover {
    border-color: #40a9ff;
    color: #40a9ff;
}

.pagination-btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
}

.placeholder {
    color: #999;
}

.selected-text {
    color: #333;
}

/* 响应式设计 */
@media (max-width: 768px) {
    .smart-selector-dropdown {
        max-height: 280px;
    }
    
    .smart-selector-options {
        max-height: 200px;
    }
    
    .smart-selector-pagination {
        flex-direction: column;
        gap: 8px;
    }
}
```

### 4. 前端集成

#### 4.1 在edit-modal.js中集成

修改 `project/static/js/edit-modal.js`：

```javascript
class EditModal {
    // ... 现有代码
    
    async loadForm(url, title = '编辑信息') {
        // ... 现有代码
        
        // 初始化智能选择器
        this.initSmartSelectors();
    }
    
    initSmartSelectors() {
        // 查找所有带有smart-selector类的select元素
        const selectors = document.querySelectorAll('.smart-selector');
        
        selectors.forEach(selectElement => {
            new SmartSelector(selectElement, {
                url: selectElement.dataset.url,
                dependentField: selectElement.dataset.dependentField,
                searchFields: selectElement.dataset.searchFields.split(','),
                displayFormat: selectElement.dataset.displayFormat,
                placeholder: selectElement.dataset.placeholder,
                allowClear: selectElement.dataset.allowClear === 'true',
                onSelect: (item) => {
                    // 触发级联更新
                    this.triggerDependentFields(selectElement, item);
                }
            });
        });
    }
    
    triggerDependentFields(changedField, selectedItem) {
        // 触发依赖字段的更新
        const targetFieldName = changedField.dataset.targetField;
        if (targetFieldName) {
            const targetField = document.querySelector(`[name="${targetFieldName}"]`);
            if (targetField && targetField.classList.contains('smart-selector')) {
                // 清空目标字段并重新加载数据
                targetField.value = '';
                const selector = targetField._smartSelector;
                if (selector) {
                    selector.filterByDependency(selectedItem.id);
                }
            }
        }
    }
}
```

### 5. 实现步骤

#### 步骤1：修改表单定义
1. 更新 `project/forms.py` 中的 `ProcurementForm`
2. 更新 `project/forms.py` 中的 `ContractForm`  
3. 更新 `project/forms.py` 中的 `PaymentForm`

#### 步骤2：添加API接口
1. 在 `config/urls.py` 中添加API路由
2. 在 `project/views.py` 中实现API视图函数

#### 步骤3：创建前端组件
1. 创建 `project/static/js/smart-selector.js`
2. 创建 `project/static/css/smart-selector.css`
3. 修改 `project/templates/components/edit_form.html` 引入新资源

#### 步骤4：集成到现有系统
1. 修改 `project/static/js/edit-modal.js`
2. 测试所有表单的智能选择功能

#### 步骤5：测试和优化
1. 测试级联筛选功能
2. 测试搜索功能
3. 测试分页功能
4. 优化用户体验

## 🎯 预期效果

### 用户体验提升
1. **搜索功能**：用户可以快速搜索和定位所需项目
2. **级联筛选**：选择项目后自动筛选相关的采购、合同
3. **智能提示**：显示完整的编码和名称信息
4. **分页加载**：大数据量时性能优化

### 数据完整性
1. **关联关系**：确保采购、合同、付款与项目的正确关联
2. **数据一致性**：级联筛选保证数据逻辑一致性
3. **错误预防**：前端验证减少数据输入错误

### 系统可维护性
1. **组件化**：智能选择器可复用于其他模块
2. **标准化**：统一的API接口和数据格式
3. **扩展性**：易于添加新的筛选条件和字段

## 📋 验收标准

1. ✅ 采购表单可以选择项目
2. ✅ 合同表单可以选择项目和采购
3. ✅ 付款表单可以选择合同（支持项目筛选）
4. ✅ 所有选择器支持搜索功能
5. ✅ 级联筛选正常工作
6. ✅ 分页功能正常
7. ✅ 移动端适配良好
8. ✅ 错误处理完善
9. ✅ 性能表现良好
10. ✅ 数据关联正确

## 🚀 后续优化建议

1. **缓存优化**：对常用数据进行缓存
2. **键盘导航**：支持键盘快捷操作
3. **批量操作**：支持批量选择和操作
4. **数据统计**：在选择器中显示相关统计信息
5. **权限控制**：根据用户权限筛选可选数据