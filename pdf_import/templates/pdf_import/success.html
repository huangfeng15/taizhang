{% extends "base.html" %}
{% load static %}

{% block title %}å¯¼å…¥æˆåŠŸ - PDFæ™ºèƒ½å¯¼å…¥{% endblock %}

{% block extra_css %}
<style>
    .success-container {
        max-width: 800px;
        margin: 60px auto;
        text-align: center;
    }
    
    .success-card {
        background: white;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        padding: 40px;
    }
    
    .success-icon {
        font-size: 80px;
        color: #28a745;
        margin-bottom: 20px;
    }
    
    .success-title {
        color: #28a745;
        font-size: 32px;
        margin-bottom: 15px;
    }
    
    .info-box {
        background: #f8f9fa;
        border-radius: 4px;
        padding: 20px;
        margin: 30px 0;
        text-align: left;
    }
    
    .action-buttons {
        margin-top: 30px;
    }
    
    .action-buttons .btn {
        margin: 10px 5px;
    }
</style>
{% endblock %}

{% block content %}
<div class="success-container">
    <div class="success-card">
        <div class="success-icon">
            âœ…
        </div>
        
        <h2 class="success-title">å¯¼å…¥æˆåŠŸï¼</h2>
        <p class="text-muted">PDFæ•°æ®å·²æˆåŠŸå¯¼å…¥ç³»ç»Ÿ</p>
        
        {% if procurement %}
        <div class="info-box">
            <h5 class="mb-3">ğŸ“‹ é‡‡è´­è®°å½•ä¿¡æ¯</h5>
            <table class="table table-sm">
                <tr>
                    <th style="width: 150px;">æ‹›é‡‡ç¼–å·ï¼š</th>
                    <td><strong>{{ procurement.procurement_code }}</strong></td>
                </tr>
                <tr>
                    <th>é¡¹ç›®åç§°ï¼š</th>
                    <td>{{ procurement.project_name }}</td>
                </tr>
                {% if procurement.budget_amount %}
                <tr>
                    <th>é¢„ç®—é‡‘é¢ï¼š</th>
                    <td>{{ procurement.budget_amount }} å…ƒ</td>
                </tr>
                {% endif %}
                <tr>
                    <th>åˆ›å»ºæ—¶é—´ï¼š</th>
                    <td>{{ session.created_at|date:"Y-m-d H:i" }}</td>
                </tr>
            </table>
        </div>
        {% endif %}
        
        {% if session.pdf_files %}
        <div class="info-box">
            <h6 class="mb-2">ğŸ“„ å…³è”çš„PDFæ–‡ä»¶ï¼ˆ{{ session.pdf_files|length }}ä¸ªï¼‰</h6>
            <ul class="list-unstyled mb-0 small text-start">
                {% for file in session.pdf_files %}
                <li class="mb-1">
                    <i class="bi bi-file-pdf text-danger"></i>
                    {{ file.name }}
                </li>
                {% endfor %}
            </ul>
        </div>
        {% endif %}
        
        <div class="action-buttons">
            {% if procurement %}
            <a href="{% url 'procurement_detail' procurement.procurement_code %}" class="btn btn-primary btn-lg">
                <i class="bi bi-eye"></i> æŸ¥çœ‹é‡‡è´­è¯¦æƒ…
            </a>
            {% endif %}
            <a href="{% url 'pdf_import:upload' %}" class="btn btn-success btn-lg">
                <i class="bi bi-plus-circle"></i> ç»§ç»­å¯¼å…¥
            </a>
            <a href="{% url 'procurement_list' %}" class="btn btn-outline-secondary btn-lg">
                <i class="bi bi-list"></i> è¿”å›åˆ—è¡¨
            </a>
        </div>
        
        <div class="mt-4">
            <small class="text-muted">
                ä¼šè¯ID: {{ session.session_id }}
            </small>
        </div>
    </div>
</div>

<script>
// 3ç§’åè‡ªåŠ¨è·³è½¬åˆ°åˆ—è¡¨é¡µï¼ˆå¯é€‰ï¼‰
// setTimeout(function() {
//     window.location.href = "{% url 'procurement_list' %}";
// }, 3000);
</script>
{% endblock %}