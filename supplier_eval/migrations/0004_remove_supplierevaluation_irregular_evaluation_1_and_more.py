# Generated by Django 5.2.7 on 2025-11-08 09:21

import django.db.models.deletion
from django.db import migrations, models


class Migration(migrations.Migration):

    dependencies = [
        ('contract', '0011_add_contract_type'),
        ('supplier_eval', '0003_alter_foreign_key_to_cascade'),
    ]

    operations = [
        migrations.RemoveField(
            model_name='supplierevaluation',
            name='irregular_evaluation_1',
        ),
        migrations.RemoveField(
            model_name='supplierevaluation',
            name='irregular_evaluation_2',
        ),
        migrations.RemoveField(
            model_name='supplierevaluation',
            name='score_2019',
        ),
        migrations.RemoveField(
            model_name='supplierevaluation',
            name='score_2020',
        ),
        migrations.RemoveField(
            model_name='supplierevaluation',
            name='score_2021',
        ),
        migrations.RemoveField(
            model_name='supplierevaluation',
            name='score_2022',
        ),
        migrations.RemoveField(
            model_name='supplierevaluation',
            name='score_2023',
        ),
        migrations.RemoveField(
            model_name='supplierevaluation',
            name='score_2024',
        ),
        migrations.RemoveField(
            model_name='supplierevaluation',
            name='score_2025',
        ),
        migrations.AddField(
            model_name='supplierevaluation',
            name='annual_scores',
            field=models.JSONField(blank=True, default=dict, help_text='格式: {"2019": 85.5, "2020": 88.0, ...}，支持任意年份动态扩展', verbose_name='年度评价得分'),
        ),
        migrations.AddField(
            model_name='supplierevaluation',
            name='irregular_scores',
            field=models.JSONField(blank=True, default=dict, help_text='格式: {"1": 90.0, "2": 85.0, ...}，支持任意次数动态扩展', verbose_name='不定期评价得分'),
        ),
        migrations.AlterField(
            model_name='supplierevaluation',
            name='contract',
            field=models.ForeignKey(help_text='该评价对应的合同（对应CSV的"合同序号"列）', on_delete=django.db.models.deletion.PROTECT, related_name='evaluations', to='contract.contract', verbose_name='关联合同'),
        ),
    ]
