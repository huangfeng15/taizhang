
# 供应商管理模块需求文档

**文档版本**: v1.0  
**创建日期**: 2025-01-07  
**项目名称**: 项目采购与成本管理系统 - 供应商管理模块  
**编写人**: 系统架构师

---

## 1. 项目概述

### 1.1 背景
现有系统已实现采购、合同、付款等核心业务模块，但缺乏对供应商履约情况的系统化管理和评价机制。为加强供应商管理，提升履约质量，需要新增供应商管理模块。

### 1.2 目标
- 建立供应商履约评价体系，量化供应商表现
- 记录和追踪供应商约谈情况，形成管理闭环
- 提供供应商承接项目查询，支持决策分析
- 支持已签约和潜在供应商的沟通记录管理

### 1.3 范围
本模块包含三个核心功能：
1. **供应商履约评价管理** - 多维度评分体系
2. **供应商承接项目查询** - 合同执行情况统计
3. **供应商约谈记录管理** - 违约约谈和日常沟通记录

---

## 2. 功能需求

### 2.1 供应商履约评价管理

#### 2.1.1 功能描述
对供应商在合同履约过程中的表现进行多维度评价，形成综合评分。

#### 2.1.2 评分规则
**综合评价得分计算公式**：
```
综合评价得分 = 末次评价得分 × 60% + 过程评价平均得分 × 40%
```

**过程评价包含**：
- 年度评价得分（2019-2025年度）
- 不定期评价得分（第一次、第二次）

**评分标准**：
- 满分：100分
- 优秀：≥90分
- 良好：≥80分
- 合格：≥70分
- 不合格：<70分

#### 2.1.3 评价字段（基于CSV模板）

**CSV导入字段**：
```
序号, 合同序号, 履约综合评价得分, 末次评价得分,
2019年度评价得分, 2020年度评价得分, 2021年度评价得分,
2022年度评价得分, 2023年度评价得分, 2024年度评价得分, 2025年度评价得分,
第一次不定期评价得分, 第二次不定期评价得分, 备注
```

**数据库字段设计**：

| 字段名称 | 类型 | 必填 | 对应CSV列 | 说明 |
|---------|------|------|----------|------|
| 合同序号 | 外键 | 是 | 合同序号 | 关联Contract模型 |
| 供应商名称 | 文本 | 是 | - | 自动从合同获取 |
| 履约综合评价得分 | 小数 | 否 | 履约综合评价得分 | 可CSV导入或自动计算 |
| 末次评价得分 | 小数 | 否 | 末次评价得分 | 权重60% |
| 2019年度评价得分 | 小数 | 否 | 2019年度评价得分 | 过程评价 |
| 2020年度评价得分 | 小数 | 否 | 2020年度评价得分 | 过程评价 |
| 2021年度评价得分 | 小数 | 否 | 2021年度评价得分 | 过程评价 |
| 2022年度评价得分 | 小数 | 否 | 2022年度评价得分 | 过程评价 |
| 2023年度评价得分 | 小数 | 否 | 2023年度评价得分 | 过程评价 |
| 2024年度评价得分 | 小数 | 否 | 2024年度评价得分 | 过程评价 |
| 2025年度评价得分 | 小数 | 否 | 2025年度评价得分 | 过程评价 |
| 第一次不定期评价得分 | 小数 | 否 | 第一次不定期评价得分 | 过程评价 |
| 第二次不定期评价得分 | 小数 | 否 | 第二次不定期评价得分 | 过程评价 |
| 备注 | 文本 | 否 | 备注 | 其他信息 |

**扩展性说明**：
- 年度字段支持延展：可在模型中增加2026、2027等年度字段
- 不定期评价支持延展：可增加第三次、第四次等字段
- 数据库迁移时添加新字段，CSV模板同步更新对应列

#### 2.1.4 功能要求
- [x] 支持批量导入CSV数据
- [x] 自动计算综合评分
- [x] 支持按供应商名称、合同编号搜索
- [x] 支持按评分区间筛选
- [x] 展示评分趋势（年度对比）
- [x] 支持导出评价报表

---

### 2.2 供应商承接项目查询

#### 2.2.1 功能描述
查询和统计供应商承接的所有合同项目，分析执行情况和付款状态。

#### 2.2.2 查询维度

| 维度 | 说明 |
|------|------|
| 供应商名称 | 按供应商筛选 |
| 合同状态 | 在执行中/已结算 |
| 项目归属 | 按项目分组 |
| 时间范围 | 按签订日期筛选 |

#### 2.2.3 统计指标

| 指标名称 | 计算规则 | 单位 |
|---------|---------|------|
| 承接合同总数 | 主合同数量 | 个 |
| 在执行合同数 | 未办理结算的合同数 | 个 |
| 合同总金额 | 所有主合同金额 + 补充协议金额之和 | 万元 |
| 每个合同的付款比例 | 单个合同的付款进度 | % |

**单个合同付款比例计算规则**：
```
IF 该合同已结算:
    付款比例 = 该合同累计付款 / 结算金额 × 100%
ELSE:
    付款比例 = 该合同累计付款 / (该合同金额 + 补充协议金额) × 100%
```

**说明**：不统计供应商的累计付款比例，因为不同合同进度不同，累计比例没有实际意义。展示时按每个合同独立显示付款进度。

#### 2.2.4 功能要求
- [x] 支持多条件组合查询
- [x] 展示合同执行进度（可视化进度条）
- [x] 区分在执行和已结算合同
- [x] 显示每个合同的付款笔数
- [x] 支持导出查询结果为Excel
- [x] 提供合同详情快速跳转

---

### 2.3 供应商约谈记录管理

#### 2.3.1 功能描述
记录供应商因违约、履约问题或商务洽谈产生的约谈和沟通情况，形成完整的沟通档案。

#### 2.3.2 约谈类型

| 类型 | 说明 | 是否需要跟进 |
|------|------|-------------|
| 违约约谈 | 因合同违约进行的约谈 | 是 |
| 履约沟通 | 履约过程中的问题沟通 | 是 |
| 商务洽谈 | 商务合作讨论 | 否 |
| 投标前沟通 | 投标前的技术交流 | 否 |
| 其他 | 其他类型沟通 | 视情况 |

#### 2.3.3 记录字段

| 字段名称 | 类型 | 必填 | 说明 |
|---------|------|------|------|
| 供应商名称 | 文本 | 是 | 被约谈单位 |
| 关联合同 | 外键 | 否 | 如因合同问题则关联 |
| 约谈类型 | 选择 | 是 | 见约谈类型表 |
| 约谈日期 | 日期 | 是 | 约谈发生日期 |
| 约谈人 | 文本 | 是 | 我方参与人员 |
| 供应商代表 | 文本 | 否 | 对方参与人员 |
| 约谈原因 | 文本 | 是 | 详细说明原因 |
| 约谈内容 | 文本 | 是 | 详细沟通内容 |
| 整改要求 | 文本 | 否 | 违约约谈时的整改要求 |
| 处理结果 | 文本 | 否 | 后续处理和跟进 |
| 跟进状态 | 选择 | 是 | 待整改/整改中/已完成/仅记录 |
| 是否已签约供应商 | 布尔 | 是 | 区分已签约和潜在供应商 |
| 附件说明 | 文本 | 否 | 相关文件记录 |

#### 2.3.4 状态流转

```
约谈记录创建
    ↓
[违约约谈] → 待整改 → 整改中 → 已完成
[其他类型] → 仅记录
```

#### 2.3.5 功能要求
- [x] 支持创建、编辑、查看约谈记录
- [x] 区分已签约和未签约供应商
- [x] 支持按约谈类型筛选
- [x] 支持按跟进状态筛选
- [x] 违约约谈记录醒目标识
- [x] 展示待跟进事项统计
- [x] 支持查看同一供应商的历史约谈记录
- [x] 支持导出约谈记录报表

---

## 3. 非功能需求

### 3.1 性能要求
- 页面加载时间：≤2秒
- 数据导入速度：≥500条/分钟
- 并发用户数：≥50人
- 数据库查询响应：≤500ms

### 3.2 可用性要求
- 系统可用性：≥99.5%
- 7×24小时运行
- 支持在线数据备份
- 提供操作日志审计

### 3.3 安全性要求
- 所有操作需登录认证
- 敏感数据加密存储
- 操作日志完整记录
- 支持权限分级管理

### 3.4 兼容性要求
- 浏览器：Chrome 90+, Edge 90+, Firefox 88+
- 分辨率：≥1366×768
- 移动端：支持响应式布局

### 3.5 数据要求
- 数据保留期：永久保留
- 数据备份：每日自动备份
- 数据导出：支持Excel、PDF格式
- 数据导入：支持CSV格式

---

## 4. 界面需求

### 4.1 导航结构
```
付款管理（展开）
├── 付款列表
└── 供应商管理
    ├── 履约评价（默认页）
    ├── 承接项目查询
    └── 约谈记录
```

### 4.2 页面布局
- 采用系统统一的卡片式布局
- 顶部显示统计概览卡片
- 中部提供筛选和搜索功能
- 底部展示数据列表和分页

### 4.3 交互要求
- 表格支持排序
- 支持高级筛选
- 支持批量操作
- 提供快速操作按钮
- 关键数据醒目展示

---

## 5. 数据导入需求

### 5.1 导入格式
- 文件格式：CSV (UTF-8编码)
- 必填字段：合同序号
- 模板提供：系统提供标准导入模板

### 5.2 导入规则
1. 按合同序号匹配现有合同
2. 自动校验数据有效性
3. 重复数据更新而非新增
4. 导入失败提供详细错误提示
5. 支持分批导入大量数据

### 5.3 数据校验
- 合同序号必须存在
- 评分范围：0-100
- 日期格式：YYYY-MM-DD
- 必填字段不能为空

---

## 6. 报表需求

### 6.1 履约评价报表
- 供应商评分排名表
- 评分趋势分析图
- 不合格供应商清单
- 年度评价对比表

### 6.2 承接项目报表
- 供应商承接统计表
- 付款进度汇总表
- 在执行合同清单
- 供应商业绩分析表

### 6.3 约谈记录报表
- 违约约谈统计表
- 待跟进事项清单
- 约谈类型分布图
- 供应商约谈历史表

---

