# æ›´æ–°ç›‘æ§é¡µé¢ - å®æ–½æŒ‡å—

## ğŸ“‹ æ–‡æ¡£æ¦‚è¿°

æœ¬æ–‡æ¡£æä¾›æ›´æ–°ç›‘æ§é¡µé¢çš„å®Œæ•´å®æ–½æŒ‡å—ï¼ŒåŒ…æ‹¬éƒ¨ç½²æ­¥éª¤ã€æµ‹è¯•æ–¹æ³•ã€å¸¸è§é—®é¢˜å’Œåç»­ä¼˜åŒ–å»ºè®®ã€‚

---

## âœ… å·²å®Œæˆçš„æ ¸å¿ƒåŠŸèƒ½

### 1. åç«¯æœåŠ¡å±‚ï¼ˆ100%ï¼‰

**æ–‡ä»¶æ¸…å•**ï¼š
- [`project/services/monitors/update_statistics.py`](../project/services/monitors/update_statistics.py) - æ ¸å¿ƒç»Ÿè®¡æœåŠ¡ï¼ˆ674è¡Œï¼‰
- [`project/services/monitors/update_statistics_facade.py`](../project/services/monitors/update_statistics_facade.py) - ç»Ÿè®¡é—¨é¢ç±»ï¼ˆ109è¡Œï¼‰

**æ ¸å¿ƒåŠŸèƒ½**ï¼š
- âœ… é¡¹ç›®ç»´åº¦ç»Ÿè®¡ï¼ˆå‡†æ—¶ç‡ã€å¹³å‡å¤©æ•°ã€å»¶è¿Ÿè®°å½•ï¼‰
- âœ… ä¸ªäººç»´åº¦ç»Ÿè®¡ï¼ˆç»åŠäººå‡†æ—¶ç‡ã€è´Ÿè´£é¡¹ç›®æ•°ï¼‰
- âœ… 4ä¸ªä¸šåŠ¡æ¨¡å—ï¼ˆé‡‡è´­ã€åˆåŒã€æ”¯ä»˜ã€ç»“ç®—ï¼‰
- âœ… å‡†æ—¶è§„åˆ™ï¼ˆæ¬¡æœˆæœˆåº•å‰æ›´æ–°ï¼‰
- âœ… å»¶è¿Ÿåˆ†çº§ï¼ˆä¸¥é‡>10å¤©ã€ä¸­åº¦5-10å¤©ã€è½»å¾®1-4å¤©ï¼‰

### 2. è§†å›¾å±‚ï¼ˆ100%ï¼‰

**æ–‡ä»¶**ï¼š[`project/views_monitoring.py`](../project/views_monitoring.py)

**ä¿®æ”¹å†…å®¹**ï¼š
- âœ… é‡æ„ `update_monitor()` å‡½æ•°ï¼ˆ251è¡Œï¼‰
- âœ… é›†æˆ `UpdateStatisticsFacade`
- âœ… æ”¯æŒåŒè§†å›¾åˆ‡æ¢ï¼ˆ`view_mode=project|person`ï¼‰
- âœ… æ”¯æŒè¯¦æƒ…å±•å¼€ï¼ˆ`target_code` å‚æ•°ï¼‰

### 3. æ¨¡æ¿å±‚ï¼ˆ100%ï¼‰

**æ–‡ä»¶**ï¼š[`project/templates/monitoring/update.html`](../project/templates/monitoring/update.html)

**é¡µé¢ç»“æ„**ï¼š
- âœ… è§†å›¾åˆ‡æ¢æŒ‰é’®ï¼ˆé¡¹ç›®è§†å›¾ â†” ä¸ªäººè§†å›¾ï¼‰
- âœ… 6å¼ KPIå¡ç‰‡ï¼ˆé¡¹ç›®æ•°ã€4ä¸ªæ¨¡å—ã€ç»¼åˆå‡†æ—¶ç‡ï¼‰
- âœ… æ•°æ®åˆ—è¡¨è¡¨æ ¼ï¼ˆæ”¯æŒæ’åºå’Œç­›é€‰ï¼‰
- âœ… å»¶è¿Ÿè®°å½•åˆ—è¡¨ï¼ˆåˆ†çº§å±•ç¤ºï¼‰
- âœ… è¯¦æƒ…æ¨¡æ€æ¡†ï¼ˆç»Ÿè®¡+è¶‹åŠ¿å›¾+è®°å½•ï¼‰
- âœ… JavaScriptäº¤äº’ï¼ˆè§†å›¾åˆ‡æ¢ã€è¯¦æƒ…å±•å¼€ã€å›¾è¡¨æ¸²æŸ“ï¼‰

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤1ï¼šç¡®è®¤ä¾èµ–

ç¡®ä¿ä»¥ä¸‹PythonåŒ…å·²å®‰è£…ï¼š

```bash
# Djangoæ ¸å¿ƒ
Django>=4.0

# æ•°æ®åº“
# æ ¹æ®å®é™…ä½¿ç”¨çš„æ•°æ®åº“å®‰è£…å¯¹åº”é©±åŠ¨

# å…¶ä»–ä¾èµ–ï¼ˆå¦‚æœæœ‰ï¼‰
python-dateutil
```

### æ­¥éª¤2ï¼šæ•°æ®åº“è¿ç§»

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd d:/develop/new pachong yangguangcaigou/taizhang

# è¿è¡Œè¿ç§»ï¼ˆå¦‚æœæœ‰æ–°çš„æ¨¡å‹å˜æ›´ï¼‰
python manage.py makemigrations
python manage.py migrate
```

### æ­¥éª¤3ï¼šé™æ€æ–‡ä»¶æ”¶é›†

```bash
# æ”¶é›†é™æ€æ–‡ä»¶ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
python manage.py collectstatic --noinput
```

### æ­¥éª¤4ï¼šé‡å¯æœåŠ¡

```bash
# Windowsç¯å¢ƒ
restart_server.bat

# æˆ–æ‰‹åŠ¨é‡å¯
stop_server.bat
start_server.bat
```

### æ­¥éª¤5ï¼šè®¿é—®é¡µé¢

æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼š
```
http://localhost:8000/monitoring/update/
```

æˆ–æ ¹æ®å®é™…é…ç½®çš„URLè®¿é—®ã€‚

---

## ğŸ§ª æµ‹è¯•æ–¹æ³•

### åŠŸèƒ½æµ‹è¯•æ¸…å•

#### 1. åŸºç¡€åŠŸèƒ½æµ‹è¯•

- [ ] **é¡µé¢åŠ è½½**
  - è®¿é—® `/monitoring/update/` é¡µé¢æ­£å¸¸åŠ è½½
  - 6å¼ KPIå¡ç‰‡æ­£ç¡®æ˜¾ç¤ºæ•°æ®
  - æ•°æ®åˆ—è¡¨è¡¨æ ¼æ­£ç¡®æ˜¾ç¤º

- [ ] **è§†å›¾åˆ‡æ¢**
  - ç‚¹å‡»"é¡¹ç›®è§†å›¾"æŒ‰é’®ï¼Œæ˜¾ç¤ºé¡¹ç›®åˆ—è¡¨
  - ç‚¹å‡»"ä¸ªäººè§†å›¾"æŒ‰é’®ï¼Œæ˜¾ç¤ºç»åŠäººåˆ—è¡¨
  - URLå‚æ•°æ­£ç¡®æ›´æ–°ï¼ˆ`?view_mode=project` æˆ– `?view_mode=person`ï¼‰

- [ ] **ç­›é€‰åŠŸèƒ½**
  - å¹´åº¦ç­›é€‰æ­£å¸¸å·¥ä½œ
  - é¡¹ç›®ç­›é€‰æ­£å¸¸å·¥ä½œ
  - ç­›é€‰åæ•°æ®æ­£ç¡®æ›´æ–°

#### 2. æ•°æ®å‡†ç¡®æ€§æµ‹è¯•

- [ ] **ç»Ÿè®¡æ•°æ®**
  - é¡¹ç›®æ€»æ•°/ç»åŠäººæ•°æ­£ç¡®
  - å„æ¨¡å—çš„å·²æ›´æ–°/æ€»æ•°æ­£ç¡®
  - å‡†æ—¶ç‡è®¡ç®—æ­£ç¡®ï¼ˆæ¬¡æœˆæœˆåº•è§„åˆ™ï¼‰
  - å¹³å‡å¤©æ•°è®¡ç®—æ­£ç¡®

- [ ] **å»¶è¿Ÿè®°å½•**
  - å»¶è¿Ÿè®°å½•æ­£ç¡®åˆ†çº§ï¼ˆä¸¥é‡ã€ä¸­åº¦ã€è½»å¾®ï¼‰
  - å»¶è¿Ÿå¤©æ•°è®¡ç®—æ­£ç¡®
  - ä¸šåŠ¡æ—¥æœŸå’Œæˆªæ­¢æ—¥æœŸæ­£ç¡®

#### 3. è¯¦æƒ…åŠŸèƒ½æµ‹è¯•

- [ ] **è¯¦æƒ…å±•å¼€**
  - ç‚¹å‡»"æŸ¥çœ‹è¯¦æƒ…"æŒ‰é’®ï¼Œæ¨¡æ€æ¡†æ­£å¸¸å¼¹å‡º
  - æ¨¡æ€æ¡†æ˜¾ç¤ºæ­£ç¡®çš„é¡¹ç›®/ç»åŠäººä¿¡æ¯
  - ç»Ÿè®¡æ¦‚è¦å¡ç‰‡æ•°æ®æ­£ç¡®

- [ ] **è¶‹åŠ¿å›¾**
  - è¶‹åŠ¿å›¾æ­£å¸¸æ¸²æŸ“ï¼ˆApexChartsï¼‰
  - 4ä¸ªæ¨¡å—çš„è¶‹åŠ¿çº¿æ­£ç¡®æ˜¾ç¤º
  - é¼ æ ‡æ‚¬åœæ˜¾ç¤ºè¯¦ç»†æ•°æ®

- [ ] **å»¶è¿Ÿè®°å½•æ˜ç»†**
  - å»¶è¿Ÿè®°å½•æŒ‰ä¸¥é‡ç¨‹åº¦åˆ†çº§æ˜¾ç¤º
  - å¯æŠ˜å /å±•å¼€å„çº§åˆ«è®°å½•
  - ç¼–è¾‘é“¾æ¥æ­£å¸¸è·³è½¬

#### 4. äº¤äº’æµ‹è¯•

- [ ] **æ¨¡æ€æ¡†ç®¡ç†**
  - æ¨¡æ€æ¡†å…³é—­åURLå‚æ•°æ­£ç¡®æ¸…ç†
  - å†æ¬¡æ‰“å¼€è¯¦æƒ…ï¼Œæ•°æ®æ­£ç¡®åŠ è½½

- [ ] **å“åº”å¼å¸ƒå±€**
  - åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹æ­£å¸¸æ˜¾ç¤º
  - ç§»åŠ¨ç«¯å¯æ­£å¸¸ä½¿ç”¨

### æ€§èƒ½æµ‹è¯•

#### 1. åŠ è½½é€Ÿåº¦æµ‹è¯•

```python
# ä½¿ç”¨Django Debug Toolbaræˆ–æ‰‹åŠ¨è®¡æ—¶
import time

start = time.time()
# è®¿é—®é¡µé¢
end = time.time()
print(f"é¡µé¢åŠ è½½æ—¶é—´: {end - start}ç§’")
```

**ç›®æ ‡**ï¼š
- æ¦‚è§ˆæ•°æ®åŠ è½½ < 1ç§’
- è¯¦æƒ…æ•°æ®åŠ è½½ < 500ms
- è¶‹åŠ¿å›¾æ¸²æŸ“ < 500ms

#### 2. æ•°æ®é‡æµ‹è¯•

æµ‹è¯•ä¸åŒæ•°æ®é‡ä¸‹çš„æ€§èƒ½ï¼š
- 10ä¸ªé¡¹ç›® / 10ä¸ªç»åŠäºº
- 50ä¸ªé¡¹ç›® / 50ä¸ªç»åŠäºº
- 100ä¸ªé¡¹ç›® / 100ä¸ªç»åŠäºº

### å…¼å®¹æ€§æµ‹è¯•

æµ‹è¯•æµè§ˆå™¨ï¼š
- [ ] Chromeï¼ˆæœ€æ–°ç‰ˆï¼‰
- [ ] Firefoxï¼ˆæœ€æ–°ç‰ˆï¼‰
- [ ] Edgeï¼ˆæœ€æ–°ç‰ˆï¼‰
- [ ] Safariï¼ˆå¦‚æœæœ‰Macï¼‰

---

## ğŸ› å¸¸è§é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ

### é—®é¢˜1ï¼šé¡µé¢æ˜¾ç¤ºç©ºç™½

**å¯èƒ½åŸå› **ï¼š
1. æ•°æ®åº“ä¸­æ²¡æœ‰æ•°æ®
2. è§†å›¾å‡½æ•°æŠ¥é”™
3. æ¨¡æ¿è·¯å¾„é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```bash
# 1. æ£€æŸ¥æ•°æ®åº“
python manage.py shell
>>> from project.models import Project
>>> Project.objects.count()

# 2. æŸ¥çœ‹æ—¥å¿—
# æ£€æŸ¥ Django æ—¥å¿—è¾“å‡º

# 3. ç¡®è®¤æ¨¡æ¿è·¯å¾„
# ç¡®ä¿ project/templates/monitoring/update.html å­˜åœ¨
```

### é—®é¢˜2ï¼šç»Ÿè®¡æ•°æ®ä¸å‡†ç¡®

**å¯èƒ½åŸå› **ï¼š
1. å‡†æ—¶è§„åˆ™è®¡ç®—é”™è¯¯
2. æ•°æ®ç­›é€‰æ¡ä»¶é”™è¯¯
3. ä¸šåŠ¡æ—¥æœŸå­—æ®µä¸ºç©º

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# æ£€æŸ¥å‡†æ—¶è§„åˆ™è®¡ç®—
from project.services.monitors.update_statistics import UpdateStatisticsService
service = UpdateStatisticsService()

# æµ‹è¯•å•ä¸ªé¡¹ç›®
result = service.get_projects_update_overview(year_filter='2024')
print(result)
```

### é—®é¢˜3ï¼šè¶‹åŠ¿å›¾ä¸æ˜¾ç¤º

**å¯èƒ½åŸå› **ï¼š
1. ApexChartsåº“æœªåŠ è½½
2. æ•°æ®æ ¼å¼é”™è¯¯
3. JavaScripté”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```html
<!-- ç¡®ä¿åœ¨æ¨¡æ¿ä¸­å¼•å…¥ApexCharts -->
<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>

<!-- æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰JavaScripté”™è¯¯ -->
```

### é—®é¢˜4ï¼šæ¨¡æ€æ¡†æ— æ³•å…³é—­

**å¯èƒ½åŸå› **ï¼š
1. Bootstrap JavaScriptæœªåŠ è½½
2. äº‹ä»¶ç›‘å¬å™¨å†²çª

**è§£å†³æ–¹æ¡ˆ**ï¼š
```html
<!-- ç¡®ä¿Bootstrap JSå·²åŠ è½½ -->
<script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>

<!-- æ£€æŸ¥æ˜¯å¦æœ‰JavaScripté”™è¯¯ -->
```

### é—®é¢˜5ï¼šç­›é€‰åŠŸèƒ½ä¸å·¥ä½œ

**å¯èƒ½åŸå› **ï¼š
1. å…¨å±€ç­›é€‰å™¨æœªæ­£ç¡®é…ç½®
2. URLå‚æ•°ä¼ é€’é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
```python
# æ£€æŸ¥è§†å›¾å‡½æ•°ä¸­çš„ç­›é€‰é€»è¾‘
def update_monitor(request):
    global_filters = _resolve_global_filters(request)
    print(f"Year: {global_filters['year_value']}")
    print(f"Project: {global_filters['project']}")
```

---

## ğŸ”§ åç»­ä¼˜åŒ–å»ºè®®

### ä¼˜å…ˆçº§1ï¼šå‰ç«¯äº¤äº’ä¼˜åŒ–ï¼ˆ1-2å¤©ï¼‰

#### 1.1 æ·»åŠ åŠ è½½åŠ¨ç”»

```javascript
// åœ¨æ•°æ®åŠ è½½æ—¶æ˜¾ç¤ºåŠ è½½åŠ¨ç”»
function showLoading() {
    const overlay = document.createElement('div');
    overlay.className = 'loading-overlay';
    overlay.innerHTML = '<div class="spinner-border text-primary"></div>';
    document.body.appendChild(overlay);
}

function hideLoading() {
    const overlay = document.querySelector('.loading-overlay');
    if (overlay) overlay.remove();
}
```

#### 1.2 ä¼˜åŒ–é”™è¯¯æç¤º

```javascript
// ç»Ÿä¸€çš„é”™è¯¯æç¤ºå‡½æ•°
function showError(message) {
    const alert = document.createElement('div');
    alert.className = 'alert alert-danger alert-dismissible fade show';
    alert.innerHTML = `
        ${message}
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    `;
    document.querySelector('.container-fluid').prepend(alert);
}
```

#### 1.3 æ”¹è¿›ç”¨æˆ·åé¦ˆ

```javascript
// æ“ä½œæˆåŠŸæç¤º
function showSuccess(message) {
    const toast = document.createElement('div');
    toast.className = 'toast align-items-center text-white bg-success border-0';
    toast.innerHTML = `
        <div class="d-flex">
            <div class="toast-body">${message}</div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto"></button>
        </div>
    `;
    // æ˜¾ç¤ºtoast
}
```

### ä¼˜å…ˆçº§2ï¼šæ—¶é—´èŒƒå›´æŸ¥è¯¢åŠŸèƒ½ï¼ˆ2å¤©ï¼‰

#### 2.1 å¿«æ·æŸ¥è¯¢å…¥å£

åœ¨ä¸»é¡µé¢åº•éƒ¨æ·»åŠ ï¼š

```html
<div class="card mb-4">
    <div class="card-header">
        <h5 class="mb-0"><i class="fas fa-clock"></i> å¿«æ·æŸ¥è¯¢</h5>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-4">
                <div class="card text-center">
                    <div class="card-body">
                        <h6>æœ¬å‘¨æ–°å¢</h6>
                        <h3 class="text-primary">{{ week_stats.total }}</h3>
                        <a href="?time_range=week" class="btn btn-sm btn-outline-primary">æŸ¥çœ‹è¯¦æƒ…</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-center">
                    <div class="card-body">
                        <h6>æœ¬æœˆæ–°å¢</h6>
                        <h3 class="text-success">{{ month_stats.total }}</h3>
                        <a href="?time_range=month" class="btn btn-sm btn-outline-success">æŸ¥çœ‹è¯¦æƒ…</a>
                    </div>
                </div>
            </div>
            <div class="col-md-4">
                <div class="card text-center">
                    <div class="card-body">
                        <h6>æœ¬å¹´åº¦æ–°å¢</h6>
                        <h3 class="text-info">{{ year_stats.total }}</h3>
                        <a href="?time_range=year" class="btn btn-sm btn-outline-info">æŸ¥çœ‹è¯¦æƒ…</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="text-center mt-3">
            <a href="/monitoring/update/records/" class="btn btn-primary">
                <i class="fas fa-search"></i> é«˜çº§æŸ¥è¯¢
            </a>
        </div>
    </div>
</div>
```

#### 2.2 ç‹¬ç«‹æŸ¥è¯¢é¡µé¢

åˆ›å»º `project/templates/monitoring/update_records.html`ï¼š

```html
<!-- æ—¶é—´èŒƒå›´ç­›é€‰ -->
<div class="card mb-4">
    <div class="card-header">
        <h5 class="mb-0">æ—¶é—´èŒƒå›´æŸ¥è¯¢</h5>
    </div>
    <div class="card-body">
        <form method="get">
            <div class="row">
                <div class="col-md-3">
                    <label>æ—¶é—´èŒƒå›´</label>
                    <select name="time_range" class="form-select">
                        <option value="week">æœ¬å‘¨</option>
                        <option value="month">æœ¬æœˆ</option>
                        <option value="year">æœ¬å¹´åº¦</option>
                        <option value="custom">è‡ªå®šä¹‰</option>
                    </select>
                </div>
                <div class="col-md-3">
                    <label>å¼€å§‹æ—¥æœŸ</label>
                    <input type="date" name="start_date" class="form-control">
                </div>
                <div class="col-md-3">
                    <label>ç»“æŸæ—¥æœŸ</label>
                    <input type="date" name="end_date" class="form-control">
                </div>
                <div class="col-md-3">
                    <label>&nbsp;</label>
                    <button type="submit" class="btn btn-primary w-100">æŸ¥è¯¢</button>
                </div>
            </div>
        </form>
    </div>
</div>

<!-- æŸ¥è¯¢ç»“æœåˆ—è¡¨ -->
<div class="card">
    <div class="card-header">
        <h5 class="mb-0">æŸ¥è¯¢ç»“æœï¼ˆå…± {{ total_count }} æ¡ï¼‰</h5>
    </div>
    <div class="card-body p-0">
        <table class="table table-hover mb-0">
            <!-- è¡¨æ ¼å†…å®¹ -->
        </table>
    </div>
    <div class="card-footer">
        <!-- åˆ†é¡µ -->
        {% include 'pagination.html' %}
    </div>
</div>
```

#### 2.3 åç«¯æ”¯æŒ

åœ¨ `project/views_monitoring.py` æ·»åŠ ï¼š

```python
def update_records(request):
    """æ›´æ–°è®°å½•æŸ¥è¯¢é¡µé¢"""
    time_range = request.GET.get('time_range', 'month')
    start_date = request.GET.get('start_date')
    end_date = request.GET.get('end_date')
    
    # è®¡ç®—æ—¶é—´èŒƒå›´
    if time_range == 'week':
        # æœ¬å‘¨é€»è¾‘
        pass
    elif time_range == 'month':
        # æœ¬æœˆé€»è¾‘
        pass
    # ... å…¶ä»–é€»è¾‘
    
    # æŸ¥è¯¢æ•°æ®
    records = []  # æŸ¥è¯¢ç»“æœ
    
    context = {
        'records': records,
        'time_range': time_range,
        # ...
    }
    return render(request, 'monitoring/update_records.html', context)
```

### ä¼˜å…ˆçº§3ï¼šæ€§èƒ½ä¼˜åŒ–ï¼ˆ1å¤©ï¼‰

#### 3.1 æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

```python
# ä½¿ç”¨select_relatedå’Œprefetch_relatedå‡å°‘æŸ¥è¯¢æ¬¡æ•°
queryset = Procurement.objects.select_related('project').filter(...)

# æ·»åŠ æ•°æ®åº“ç´¢å¼•
class Meta:
    indexes = [
        models.Index(fields=['result_publicity_release_date']),
        models.Index(fields=['updated_at']),
    ]
```

#### 3.2 ç¼“å­˜ç­–ç•¥

```python
from django.core.cache import cache

def get_projects_update_overview(self, year_filter=None, project_filter=None):
    # ç”Ÿæˆç¼“å­˜é”®
    cache_key = f"update_overview_{year_filter}_{project_filter}"
    
    # å°è¯•ä»ç¼“å­˜è·å–
    cached_data = cache.get(cache_key)
    if cached_data:
        return cached_data
    
    # è®¡ç®—æ•°æ®
    data = self._calculate_overview(...)
    
    # ç¼“å­˜5åˆ†é’Ÿ
    cache.set(cache_key, data, 300)
    
    return data
```

#### 3.3 å‰ç«¯ä¼˜åŒ–

```javascript
// æ‡’åŠ è½½è¶‹åŠ¿å›¾
const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
        if (entry.isIntersecting) {
            renderTrendChart();
            observer.unobserve(entry.target);
        }
    });
});

observer.observe(document.getElementById('trendChart'));
```

### ä¼˜å…ˆçº§4ï¼šç”¨æˆ·ä½“éªŒä¼˜åŒ–ï¼ˆ1å¤©ï¼‰

#### 4.1 ç§»åŠ¨ç«¯é€‚é…

```css
/* å“åº”å¼è¡¨æ ¼ */
@media (max-width: 768px) {
    .table-responsive {
        overflow-x: auto;
    }
    
    .stats-card {
        margin-bottom: 1rem;
    }
    
    .view-mode-selector {
        width: 100%;
    }
}
```

#### 4.2 æ‰“å°æ ·å¼

```css
@media print {
    .view-mode-selector,
    .btn,
    .alert {
        display: none;
    }
    
    .card {
        page-break-inside: avoid;
    }
}
```

#### 4.3 æ— éšœç¢è®¿é—®

```html
<!-- æ·»åŠ ARIAæ ‡ç­¾ -->
<button type="button" 
        class="view-mode-btn" 
        data-mode="project"
        aria-label="åˆ‡æ¢åˆ°é¡¹ç›®è§†å›¾"
        aria-pressed="true">
    <i class="fas fa-project-diagram" aria-hidden="true"></i> é¡¹ç›®è§†å›¾
</button>
```

---

## ğŸ“Š éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶

- [ ] æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ•°æ®ç»Ÿè®¡å‡†ç¡®æ— è¯¯
- [ ] è§†å›¾åˆ‡æ¢æµç•…
- [ ] è¯¦æƒ…å±•å¼€æ­£å¸¸
- [ ] è¶‹åŠ¿å›¾æ­£ç¡®æ¸²æŸ“
- [ ] å»¶è¿Ÿè®°å½•åˆ†çº§æ­£ç¡®

### æ€§èƒ½éªŒæ”¶

- [ ] é¡µé¢åŠ è½½æ—¶é—´ < 1ç§’
- [ ] è¯¦æƒ…åŠ è½½æ—¶é—´ < 500ms
- [ ] è¶‹åŠ¿å›¾æ¸²æŸ“æ—¶é—´ < 500ms
- [ ] æ”¯æŒ100+é¡¹ç›®/ç»åŠäºº

### å…¼å®¹æ€§éªŒæ”¶

- [ ] Chromeæµè§ˆå™¨æ­£å¸¸
- [ ] Firefoxæµè§ˆå™¨æ­£å¸¸
- [ ] Edgeæµè§ˆå™¨æ­£å¸¸
- [ ] ç§»åŠ¨ç«¯å¯ç”¨

### ä»£ç è´¨é‡éªŒæ”¶

- [ ] ä»£ç ç¬¦åˆPEP 8è§„èŒƒ
- [ ] æœ‰å……åˆ†çš„æ³¨é‡Š
- [ ] æ— æ˜æ˜¾çš„ä»£ç é‡å¤
- [ ] éµå¾ªDRYã€SOLIDåŸåˆ™

---

## ğŸ“ ç»´æŠ¤æŒ‡å—

### æ—¥å¸¸ç»´æŠ¤

1. **å®šæœŸæ£€æŸ¥æ•°æ®å‡†ç¡®æ€§**
   - æ¯å‘¨æŠ½æŸ¥ç»Ÿè®¡æ•°æ®
   - éªŒè¯å‡†æ—¶ç‡è®¡ç®—
   - æ£€æŸ¥å»¶è¿Ÿè®°å½•åˆ†çº§

2. **æ€§èƒ½ç›‘æ§**
   - ç›‘æ§é¡µé¢åŠ è½½æ—¶é—´
   - æ£€æŸ¥æ•°æ®åº“æŸ¥è¯¢æ€§èƒ½
   - ä¼˜åŒ–æ…¢æŸ¥è¯¢

3. **ç”¨æˆ·åé¦ˆ**
   - æ”¶é›†ç”¨æˆ·ä½¿ç”¨åé¦ˆ
   - è®°å½•å¸¸è§é—®é¢˜
   - æŒç»­æ”¹è¿›ç”¨æˆ·ä½“éªŒ

### æ•…éšœæ’æŸ¥

1. **æ•°æ®å¼‚å¸¸**
   - æ£€æŸ¥æ•°æ®æº
   - éªŒè¯è®¡ç®—é€»è¾‘
   - æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶

2. **æ€§èƒ½é—®é¢˜**
   - åˆ†ææ…¢æŸ¥è¯¢
   - æ£€æŸ¥ç¼“å­˜å‘½ä¸­ç‡
   - ä¼˜åŒ–æ•°æ®åº“ç´¢å¼•

3. **æ˜¾ç¤ºé—®é¢˜**
   - æ£€æŸ¥æµè§ˆå™¨å…¼å®¹æ€§
   - éªŒè¯CSS/JSåŠ è½½
   - æŸ¥çœ‹æ§åˆ¶å°é”™è¯¯

---

## ğŸ“ å­¦ä¹ èµ„æº

### Djangoæ–‡æ¡£
- [Djangoå®˜æ–¹æ–‡æ¡£](https://docs.djangoproject.com/)
- [DjangoæŸ¥è¯¢ä¼˜åŒ–](https://docs.djangoproject.com/en/stable/topics/db/optimization/)

### å‰ç«¯æŠ€æœ¯
- [Bootstrap 5æ–‡æ¡£](https://getbootstrap.com/docs/5.0/)
- [ApexChartsæ–‡æ¡£](https://apexcharts.com/docs/)

### æœ€ä½³å®è·µ
- [Djangoæœ€ä½³å®è·µ](https://django-best-practices.readthedocs.io/)
- [Pythonä»£ç è§„èŒƒPEP 8](https://pep8.org/)

---

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒï¼š
1. æœ¬é¡¹ç›®çš„å…¶ä»–æ–‡æ¡£
2. Djangoå®˜æ–¹æ–‡æ¡£
3. é¡¹ç›®issueè·Ÿè¸ªç³»ç»Ÿ

---

**æ–‡æ¡£ç‰ˆæœ¬**ï¼šv1.0  
**æœ€åæ›´æ–°**ï¼š2025-11-14  
**ç»´æŠ¤äººå‘˜**ï¼šå¼€å‘å›¢é˜Ÿ