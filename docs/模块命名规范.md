# 模块命名规范

## 目的

统一系统中的模块命名，避免混乱和错误，提高代码可维护性。

## 标准模块名称

系统中所有模块**必须且仅使用**以下标准名称：

| 模块 | 标准名称 | 说明 | 状态 |
|------|---------|------|------|
| 项目管理 | `project` | 项目基础信息管理 | ✅ 稳定 |
| 采购管理 | `procurement` | 采购项目、招投标管理 | ✅ 稳定 |
| 合同管理 | `contract` | 合同签订、执行管理 | ✅ 稳定 |
| 付款管理 | `payment` | 付款记录、结算管理 | ✅ 稳定 |
| 供应商评价 | `supplier_eval` | 供应商履约评价管理 | ✅ 稳定 |

## 命名原则

### 1. 单一标准名称
- ✅ **推荐**：每个模块只有一个标准名称
- ❌ **禁止**：为同一模块创建多个别名

### 2. 历史兼容性处理
- 对于已经在使用的旧名称，仅保留**一个**历史兼容别名
- 在代码注释中明确标注该别名将在未来版本中移除
- 逐步迁移现有代码使用标准名称

### 3. 前后端统一
- 前端页面、API接口、后端命令必须使用相同的模块名称
- URL路由、文件路径、配置文件中的命名必须一致

## 供应商评价模块命名演变

### 历史问题（已解决）
曾经存在的混乱命名：
- ❌ `supplier` - 过于简短，不明确
- ❌ `evaluation` - 过于通用，不明确评价对象
- ❌ `supplier_evaluation` - 冗长
- ✅ `supplier_eval` - **标准名称（已统一）**

### 迁移完成 ✅
- ✅ v2.1 (2025-01-12): 已移除所有历史别名
- ✅ 所有代码已迁移到标准名称`supplier_eval`
- ✅ 不再支持`evaluation`、`supplier`等旧别名

### 使用规范
**所有代码必须使用标准名称**：
```python
# ✅ 正确：使用标准名称
module = 'supplier_eval'

# ❌ 错误：不再支持旧别名
module = 'evaluation'  # 会导致错误！
```

## 代码实现规范

### 前端调用
```javascript
// ✅ 正确：使用标准名称
fetch('/api/import/', {
    method: 'POST',
    body: formData.append('module', 'supplier_eval')
});

// ❌ 错误：不要使用非标准名称
fetch('/api/import/', {
    method: 'POST',
    body: formData.append('module', 'supplier')  // 错误！
});
```

### 后端处理
```python
# ✅ 正确：统一规范，最小别名
def import_data(request):
    module = request.POST.get('module', 'project')
    
    # 仅保留一个历史兼容别名
    if module == 'evaluation':
        module = 'supplier_eval'
    
    # 其他逻辑...
```

### 配置文件
```yaml
# ✅ 正确：使用标准名称
modules:
  - project
  - procurement
  - contract
  - payment
  - supplier_eval  # 标准名称
```

## 检查清单

在添加新模块或修改现有模块时，请检查：

- [ ] 模块名称是否使用标准名称？
- [ ] 是否添加了不必要的别名？
- [ ] URL路由、API接口、命令名称是否一致？
- [ ] 文档中是否明确说明标准名称？
- [ ] 是否在代码注释中说明了兼容性处理？

## 常见错误

### ❌ 错误示例1：使用旧别名
```python
# 错误：不要使用已废弃的别名
module = 'evaluation'  # 已废弃！
module = 'supplier'  # 已废弃！
module = 'supplier_evaluation'  # 已废弃！
```

### ✅ 正确示例1：使用标准名称
```python
# 正确：始终使用标准名称
module = 'supplier_eval'
```

### ❌ 错误示例2：不一致命名
```python
# 错误：前后端使用不同名称
# 前端：module = 'supplier'
# 后端：处理 'supplier_eval'
```

### ✅ 正确示例2：统一命名
```python
# 正确：前后端使用相同标准名称
# 前端：module = 'supplier_eval'
# 后端：处理 'supplier_eval'
```

## 更新日志

| 版本 | 日期 | 变更 |
|-----|------|-----|
| v2.1 | 2025-01-12 | 统一供应商评价模块名称为 `supplier_eval` |
| v2.1 | 2025-01-12 | **完成迁移**：移除所有历史别名 |
| v2.1 | 2025-01-12 | 更新所有相关文件使用标准名称 |

## 参考资源

- 系统架构文档：`docs/系统架构分析文档.md`
- 数据模型文档：`docs/数据模型使用手册.md`
- API文档：待完善

---

**重要提示**：遵循本规范可以显著降低系统维护成本，减少命名混乱导致的bug。